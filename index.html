<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Vibro.x - Next-Gen Video Platform</title>
<meta name="description" content="Immerse yourself in the future of video sharing with unprecedented visual effects and interactions">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="icon/Vibro.ico?v=1">
<link rel="shortcut icon" type="image/x-icon" href="icon/Vibro.ico?v=1">
<link rel="apple-touch-icon" href="icon/Vibro.ico?v=1">
<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Inter Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<!-- Google Fonts for additional effects -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Rajdhani:wght@300;400;500;600;700&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
:root {
    --primary: #ff0000;
    --primary-dark: #cc0000;
    --primary-light: #ff3333;
    --secondary: #065fd4;
    --secondary-light: #4d8eff;
    --accent-1: #ff00ff;
    --accent-2: #00ffff;
    --accent-3: #ffff00;
    --accent-4: #00ff00;
    --dark-bg: #0a0a0a;
    --darker-bg: #050505;
    --dark-surface: #151515;
    --dark-surface-light: #222222;
    --dark-surface-hover: #333333;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
    --text-tertiary: #888888;
    --border-color: #404040;
    --success: #00ff88;
    --danger: #ff3860;
    --warning: #ffdd40;
    --info: #2be2ff;
    --neon-glow: 0 0 10px, 0 0 20px, 0 0 30px, 0 0 40px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.8);
    --shadow-md: 0 4px 20px rgba(0,0,0,0.9);
    --shadow-lg: 0 10px 40px rgba(0,0,0,1);
    --transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    --transition-slow: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    --border-radius: 16px;
    --border-radius-sm: 10px;
    --border-radius-full: 9999px;
}

/* Particle Canvas */
#particles-js {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -1000;
    pointer-events: none;
}

/* Background Effects */
.background-effects {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    z-index: -999;
    overflow: hidden;
    pointer-events: none;
}

.gradient-bg {
    position: absolute;
    width: 200%;
    height: 200%;
    top: -50%;
    left: -50%;
    background: 
        radial-gradient(circle at 20% 30%, rgba(255, 0, 0, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(6, 95, 212, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
    animation: rotateGradient 60s linear infinite;
}

@keyframes rotateGradient {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    cursor: none !important;
    user-select: none;
}

/* CURSOR SYSTEM - 50+ Effects */
.cursor-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 999999;
    overflow: hidden;
}

/* Base Cursors */
.cursor-dot {
    position: absolute;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--primary);
    pointer-events: none;
    z-index: 999999;
    transform: translate(-50%, -50%);
    transition: transform 0.1s linear, width 0.3s, height 0.3s, background-color 0.3s;
    mix-blend-mode: difference;
    filter: drop-shadow(0 0 5px currentColor);
}

.cursor-outline {
    position: absolute;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 2px solid var(--primary);
    pointer-events: none;
    z-index: 999998;
    transform: translate(-50%, -50%);
    transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    filter: drop-shadow(0 0 8px var(--primary));
}

/* Cursor Trail Effects */
.cursor-trail {
    position: absolute;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--primary);
    pointer-events: none;
    z-index: 999997;
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.5);
}

.trail-1 { animation: trailFade 0.6s ease-out forwards; }
.trail-2 { animation: trailFade 0.5s ease-out 0.05s forwards; }
.trail-3 { animation: trailFade 0.4s ease-out 0.1s forwards; }
.trail-4 { animation: trailFade 0.3s ease-out 0.15s forwards; }
.trail-5 { animation: trailFade 0.2s ease-out 0.2s forwards; }

@keyframes trailFade {
    0% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(0.2); }
}

/* Cursor Particles */
.cursor-particle {
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 999996;
    opacity: 0;
}

/* Cursor Effects */
.cursor-dot.effect-ripple {
    animation: rippleEffect 0.6s ease-out;
}

.cursor-dot.effect-pulse {
    animation: pulseEffect 0.8s ease-in-out infinite;
}

.cursor-dot.effect-spin {
    animation: spinEffect 1s linear infinite;
}

.cursor-dot.effect-bounce {
    animation: bounceEffect 0.5s ease infinite alternate;
}

.cursor-dot.effect-shake {
    animation: shakeEffect 0.3s ease-in-out infinite;
}

.cursor-dot.effect-color-cycle {
    animation: colorCycle 3s linear infinite;
}

.cursor-dot.effect-rainbow {
    background: linear-gradient(45deg, 
        #ff0000, #ff9900, #ffff00, #00ff00, 
        #00ffff, #0000ff, #9900ff, #ff00ff);
    background-size: 400% 400%;
    animation: rainbowEffect 3s linear infinite;
}

.cursor-outline.effect-expand {
    animation: expandEffect 0.8s ease-out infinite alternate;
}

.cursor-outline.effect-rotate {
    animation: rotateEffect 2s linear infinite;
}

.cursor-outline.effect-wave {
    animation: waveEffect 1.5s ease-in-out infinite;
}

.cursor-outline.effect-dash {
    border-style: dashed;
    animation: dashRotate 10s linear infinite;
}

/* Cursor Effect Animations */
@keyframes rippleEffect {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
}

@keyframes pulseEffect {
    0%, 100% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.5); }
}

@keyframes spinEffect {
    0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
    100% { transform: translate(-50%, -50%) rotate(360deg) scale(1); }
}

@keyframes bounceEffect {
    0% { transform: translate(-50%, -50%) scale(1); }
    100% { transform: translate(-50%, -50%) scale(1.3); }
}

@keyframes shakeEffect {
    0%, 100% { transform: translate(-50%, -50%) translateX(0); }
    25% { transform: translate(-50%, -50%) translateX(5px); }
    75% { transform: translate(-50%, -50%) translateX(-5px); }
}

@keyframes colorCycle {
    0% { background-color: #ff0000; }
    25% { background-color: #00ff00; }
    50% { background-color: #0000ff; }
    75% { background-color: #ffff00; }
    100% { background-color: #ff0000; }
}

@keyframes rainbowEffect {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
}

@keyframes expandEffect {
    0% { width: 40px; height: 40px; opacity: 0.5; }
    100% { width: 80px; height: 80px; opacity: 0; }
}

@keyframes rotateEffect {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes waveEffect {
    0%, 100% { border-width: 2px; }
    50% { border-width: 6px; }
}

@keyframes dashRotate {
    0% { transform: translate(-50%, -50%) rotate(0deg); }
    100% { transform: translate(-50%, -50%) rotate(360deg); }
}

/* Cursor Mode Classes */
.cursor-dot.hover-button {
    width: 16px;
    height: 16px;
    background: var(--accent-1);
    animation: none;
}

.cursor-dot.hover-video {
    width: 24px;
    height: 24px;
    background: transparent;
    border: 3px solid var(--accent-2);
    animation: spinEffect 1s linear infinite;
}

.cursor-dot.hover-text {
    width: 4px;
    height: 24px;
    border-radius: 2px;
    background: var(--accent-3);
    animation: pulseEffect 1s ease-in-out infinite;
}

.cursor-dot.hover-input {
    width: 20px;
    height: 20px;
    background: var(--accent-4);
    border-radius: 5px;
    animation: bounceEffect 0.5s ease infinite alternate;
}

.cursor-dot.hover-danger {
    width: 12px;
    height: 12px;
    background: var(--danger);
    animation: shakeEffect 0.3s ease-in-out infinite;
}

.cursor-dot.hover-success {
    width: 16px;
    height: 16px;
    background: var(--success);
    animation: pulseEffect 0.8s ease-in-out infinite;
}

.cursor-outline.hover-button {
    border-color: var(--accent-1);
    width: 60px;
    height: 60px;
    animation: expandEffect 1s ease-out infinite alternate;
}

.cursor-outline.hover-video {
    border-color: var(--accent-2);
    width: 80px;
    height: 80px;
    animation: waveEffect 1.5s ease-in-out infinite;
}

/* Page Effects */
.page-transition {
    animation: pageLoadEffect 1.2s cubic-bezier(0.19, 1, 0.22, 1) forwards;
    opacity: 0;
}

@keyframes pageLoadEffect {
    0% {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
        filter: blur(10px);
    }
    100% {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
}

/* Header Effects */
.header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 70px;
    background: rgba(15, 15, 15, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    padding: 0 24px;
    z-index: 10000;
    gap: 32px;
    transform: translateY(0);
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), background 0.5s ease;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.header.scrolled {
    background: rgba(10, 10, 10, 0.98);
    height: 60px;
    backdrop-filter: blur(30px);
    box-shadow: 0 5px 20px rgba(255, 0, 0, 0.2);
}

.header.hidden {
    transform: translateY(-100%);
}

.logo {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 900;
    font-size: 28px;
    color: var(--text-primary);
    text-decoration: none;
    transition: var(--transition);
    position: relative;
    text-transform: uppercase;
    letter-spacing: 2px;
    background: linear-gradient(45deg, var(--primary), var(--accent-1), var(--accent-2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: logoGlow 3s ease-in-out infinite alternate;
}

@keyframes logoGlow {
    0% {
        filter: drop-shadow(0 0 5px var(--primary));
    }
    100% {
        filter: drop-shadow(0 0 20px var(--primary)) 
                drop-shadow(0 0 30px var(--accent-1));
    }
}

.logo-icon {
    font-size: 32px;
    color: var(--primary);
    animation: logoSpin 10s linear infinite;
    filter: drop-shadow(0 0 10px var(--primary));
}

@keyframes logoSpin {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(180deg) scale(1.2); }
    100% { transform: rotate(360deg) scale(1); }
}

/* Search Bar with Effects */
.search-container {
    flex: 1;
    max-width: 700px;
    position: relative;
}

.search-bar {
    display: flex;
    height: 48px;
    border-radius: var(--border-radius-full);
    overflow: hidden;
    border: 2px solid transparent;
    background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
    backdrop-filter: blur(10px);
    transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    position: relative;
    box-shadow: inset 0 2px 10px rgba(0,0,0,0.3);
}

.search-bar::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent-2));
    border-radius: var(--border-radius-full);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.search-bar:focus-within {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(255, 0, 0, 0.3);
}

.search-bar:focus-within::before {
    opacity: 1;
}

.search-input {
    flex: 1;
    padding: 0 24px;
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-size: 16px;
    font-family: 'Poppins', sans-serif;
    font-weight: 400;
    outline: none;
    transition: var(--transition);
    letter-spacing: 0.5px;
}

.search-input::placeholder {
    color: var(--text-tertiary);
    font-style: italic;
}

.search-button {
    width: 80px;
    background: linear-gradient(45deg, var(--primary), var(--primary-dark));
    border: none;
    color: white;
    cursor: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    font-size: 18px;
}

.search-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.search-button:hover::before {
    width: 300px;
    height: 300px;
}

.search-button:hover {
    background: linear-gradient(45deg, var(--primary-light), var(--primary));
    transform: scale(1.05);
    box-shadow: 0 0 30px rgba(255, 0, 0, 0.5);
}

/* Upload Button Effects */
.upload-btn {
    background: linear-gradient(45deg, var(--primary), var(--accent-1));
    color: white;
    border: none;
    padding: 12px 28px;
    border-radius: var(--border-radius-full);
    font-weight: 700;
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px;
    cursor: none;
    display: flex;
    align-items: center;
    gap: 12px;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    letter-spacing: 1px;
    text-transform: uppercase;
    box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
}

.upload-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.7s ease;
}

.upload-btn:hover::before {
    left: 100%;
}

.upload-btn:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 15px 35px rgba(255, 0, 0, 0.5),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
    letter-spacing: 2px;
}

.upload-btn:active {
    transform: translateY(0) scale(0.95);
    transition: all 0.1s ease;
}

/* User Avatar Effects */
.user-avatar {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    cursor: none;
    border: 3px solid transparent;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    object-fit: cover;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    position: relative;
    background: linear-gradient(45deg, var(--primary), var(--secondary));
    padding: 2px;
}

.user-avatar:hover {
    border-color: var(--primary);
    transform: scale(1.15) rotate(5deg);
    box-shadow: 0 0 30px var(--primary),
                inset 0 0 20px rgba(255, 255, 255, 0.2);
}

.user-avatar::after {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent-1));
    z-index: -1;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.user-avatar:hover::after {
    opacity: 1;
    animation: avatarGlow 2s ease-in-out infinite alternate;
}

@keyframes avatarGlow {
    0% {
        filter: blur(5px);
        opacity: 0.8;
    }
    100% {
        filter: blur(10px);
        opacity: 0.4;
    }
}

/* Dropdown Effects */
.user-dropdown {
    position: absolute;
    top: calc(100% + 10px);
    right: 0;
    width: 280px;
    background: rgba(20, 20, 20, 0.95);
    backdrop-filter: blur(30px);
    border-radius: var(--border-radius);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(255, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    display: none;
    z-index: 10001;
    overflow: hidden;
    transform-origin: top right;
    animation: dropdownAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes dropdownAppear {
    from {
        opacity: 0;
        transform: scale(0.8) translateY(-20px) rotateX(45deg);
        filter: blur(10px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0) rotateX(0);
        filter: blur(0);
    }
}

.dropdown-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 24px;
    color: var(--text-primary);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: none;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
    font-size: 15px;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    position: relative;
    overflow: hidden;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.dropdown-item:last-child {
    border-bottom: none;
}

.dropdown-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, rgba(255, 0, 0, 0.2), transparent);
    transition: width 0.4s ease;
    z-index: -1;
}

.dropdown-item:hover::before {
    width: 100%;
}

.dropdown-item:hover {
    color: var(--primary);
    padding-left: 32px;
    transform: translateX(5px);
}

.dropdown-item i {
    width: 24px;
    color: var(--text-secondary);
    font-size: 18px;
    transition: all 0.3s ease;
}

.dropdown-item:hover i {
    color: var(--primary);
    transform: scale(1.3) rotate(15deg);
}

/* Main Container Effects */
.main-container {
    display: flex;
    margin-top: 70px;
    min-height: calc(100vh - 70px);
    position: relative;
    overflow: hidden;
}

/* Sidebar with Advanced Effects */
.sidebar {
    width: 280px;
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(20px);
    border-right: 1px solid rgba(255, 255, 255, 0.1);
    padding: 24px 0;
    position: fixed;
    top: 70px;
    left: 0;
    bottom: 0;
    overflow-y: auto;
    z-index: 9999;
    transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 10px 0 30px rgba(0, 0, 0, 0.5);
}

.sidebar::-webkit-scrollbar {
    width: 8px;
}

.sidebar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--primary), var(--secondary));
    border-radius: 4px;
}

.sidebar-item {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 18px 32px;
    color: var(--text-primary);
    text-decoration: none;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: none;
    border-radius: 0;
    margin: 0;
    position: relative;
    overflow: hidden;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    font-size: 16px;
    letter-spacing: 1px;
    text-transform: uppercase;
}

.sidebar-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 6px;
    background: linear-gradient(to bottom, var(--primary), var(--accent-1));
    transform: translateX(-100%);
    transition: transform 0.4s ease;
}

.sidebar-item::after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 100%;
    background: linear-gradient(90deg, rgba(255, 0, 0, 0.1), transparent);
    transform: translateX(-100%);
    transition: transform 0.6s ease;
    z-index: -1;
}

.sidebar-item:hover {
    background: rgba(255, 255, 255, 0.05);
    padding-left: 40px;
    letter-spacing: 2px;
}

.sidebar-item:hover::before {
    transform: translateX(0);
}

.sidebar-item:hover::after {
    transform: translateX(0);
    transition-delay: 0.1s;
}

.sidebar-item.active {
    background: rgba(255, 0, 0, 0.15);
    color: var(--primary);
    padding-left: 40px;
    text-shadow: 0 0 10px var(--primary);
}

.sidebar-item.active::before {
    transform: translateX(0);
}

.sidebar-item i {
    width: 28px;
    text-align: center;
    font-size: 20px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.sidebar-item:hover i {
    transform: scale(1.4) rotate(15deg);
    color: var(--primary);
}

/* Main Content Area */
.main-content {
    flex: 1;
    margin-left: 280px;
    padding: 32px;
    transition: margin-left 0.5s ease;
    position: relative;
    overflow: hidden;
}

/* Floating Background Elements */
.floating-element {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
    filter: blur(40px);
    opacity: 0.1;
    z-index: -1;
    animation: floatAround 20s infinite linear;
}

.floating-element:nth-child(1) {
    width: 300px;
    height: 300px;
    top: 10%;
    left: 10%;
    animation-delay: 0s;
    background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
}

.floating-element:nth-child(2) {
    width: 200px;
    height: 200px;
    top: 60%;
    right: 15%;
    animation-delay: -5s;
    background: radial-gradient(circle, var(--secondary) 0%, transparent 70%);
}

.floating-element:nth-child(3) {
    width: 150px;
    height: 150px;
    bottom: 20%;
    left: 20%;
    animation-delay: -10s;
    background: radial-gradient(circle, var(--accent-1) 0%, transparent 70%);
}

@keyframes floatAround {
    0%, 100% {
        transform: translate(0, 0) rotate(0deg);
    }
    25% {
        transform: translate(100px, 50px) rotate(90deg);
    }
    50% {
        transform: translate(50px, 100px) rotate(180deg);
    }
    75% {
        transform: translate(-50px, 50px) rotate(270deg);
    }
}

/* Upload Container with Effects */
.upload-container {
    max-width: 900px;
    margin: 0 auto;
    background: rgba(25, 25, 25, 0.8);
    backdrop-filter: blur(30px);
    border-radius: var(--border-radius);
    padding: 48px;
    box-shadow: var(--shadow-lg),
                0 0 60px rgba(255, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: slideUp 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275),
               containerGlow 3s ease-in-out infinite alternate;
    position: relative;
    overflow: hidden;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(40px) scale(0.9);
        filter: blur(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
        filter: blur(0);
    }
}

@keyframes containerGlow {
    0% {
        box-shadow: var(--shadow-lg),
                    0 0 40px rgba(255, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    100% {
        box-shadow: var(--shadow-lg),
                    0 0 80px rgba(255, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
    }
}

.upload-container::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent-1), var(--accent-2));
    border-radius: calc(var(--border-radius) + 2px);
    z-index: -1;
    opacity: 0.3;
    filter: blur(20px);
    animation: borderGlow 4s linear infinite;
}

@keyframes borderGlow {
    0%, 100% {
        opacity: 0.2;
        filter: blur(20px);
    }
    50% {
        opacity: 0.4;
        filter: blur(30px);
    }
}

.upload-container h2 {
    font-family: 'Orbitron', sans-serif;
    font-size: 36px;
    margin-bottom: 32px;
    background: linear-gradient(45deg, var(--primary), var(--accent-1), var(--accent-2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-align: center;
    letter-spacing: 2px;
    position: relative;
    display: inline-block;
    width: 100%;
}

.upload-container h2::after {
    content: '';
    position: absolute;
    bottom: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 4px;
    background: linear-gradient(to right, var(--primary), var(--accent-1));
    border-radius: 2px;
    box-shadow: 0 0 20px var(--primary);
}

/* Upload Area with Particle Effect */
.upload-area {
    border: 3px dashed rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius);
    padding: 64px 32px;
    text-align: center;
    margin-bottom: 32px;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: none;
    position: relative;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(10px);
}

.upload-area::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
    transition: left 1s ease;
}

.upload-area:hover::before {
    left: 100%;
}

.upload-area:hover {
    border-color: var(--primary);
    background: rgba(255, 0, 0, 0.05);
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 20px 60px rgba(255, 0, 0, 0.3),
                inset 0 0 40px rgba(255, 255, 255, 0.1);
}

.upload-area.dragover {
    border-color: var(--accent-1);
    background: rgba(255, 0, 255, 0.1);
    transform: scale(0.98);
    animation: dragPulse 0.6s ease-in-out infinite alternate;
}

@keyframes dragPulse {
    from {
        box-shadow: 0 0 30px rgba(255, 0, 255, 0.3);
    }
    to {
        box-shadow: 0 0 60px rgba(255, 0, 255, 0.6);
    }
}

.upload-icon {
    font-size: 72px;
    color: var(--primary);
    margin-bottom: 24px;
    animation: float 3s ease-in-out infinite,
               iconGlow 2s ease-in-out infinite alternate;
    filter: drop-shadow(0 0 10px var(--primary));
}

@keyframes float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-20px) rotate(5deg); }
}

@keyframes iconGlow {
    0% { filter: drop-shadow(0 0 10px var(--primary)); }
    100% { filter: drop-shadow(0 0 30px var(--primary)); }
}

/* File Info with Effects */
.file-info {
    background: linear-gradient(135deg, rgba(255,0,0,0.1), rgba(0,95,212,0.1));
    border-radius: var(--border-radius-sm);
    padding: 24px;
    margin-bottom: 24px;
    border-left: 6px solid var(--primary);
    animation: fadeIn 0.5s ease,
               infoGlow 3s ease-in-out infinite alternate;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes infoGlow {
    0% {
        box-shadow: 0 5px 20px rgba(255, 0, 0, 0.2);
    }
    100% {
        box-shadow: 0 5px 40px rgba(255, 0, 0, 0.4);
    }
}

/* Form Elements with Effects */
.form-group {
    margin-bottom: 28px;
    animation: fadeInUp 0.6s ease;
    position: relative;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.form-group label {
    display: block;
    margin-bottom: 12px;
    font-weight: 600;
    color: var(--text-primary);
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px;
    letter-spacing: 1px;
    text-transform: uppercase;
    position: relative;
    display: inline-block;
}

.form-group label::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--primary);
    transition: width 0.4s ease;
}

.form-group:focus-within label::after {
    width: 100%;
}

.form-group input,
.form-group textarea,
.form-group select {
    width: 100%;
    padding: 18px 24px;
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: var(--border-radius-sm);
    color: var(--text-primary);
    font-size: 16px;
    font-family: 'Poppins', sans-serif;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    backdrop-filter: blur(10px);
    letter-spacing: 0.5px;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--primary);
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(255, 0, 0, 0.2),
                0 0 0 4px rgba(255, 0, 0, 0.1);
}

.form-group textarea {
    min-height: 140px;
    resize: vertical;
}

/* Video Cards with Extreme Effects */
.videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
    gap: 32px;
    margin-top: 32px;
}

.video-card {
    background: rgba(30, 30, 30, 0.8);
    backdrop-filter: blur(20px);
    border-radius: var(--border-radius);
    overflow: hidden;
    transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    cursor: none;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    transform-style: preserve-3d;
    perspective: 1000px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    animation: cardAppear 0.6s ease backwards;
}

@keyframes cardAppear {
    from {
        opacity: 0;
        transform: scale(0.8) rotateY(45deg);
    }
    to {
        opacity: 1;
        transform: scale(1) rotateY(0);
    }
}

.video-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, transparent 30%, rgba(255, 0, 0, 0.05) 50%, transparent 70%);
    opacity: 0;
    transition: opacity 0.6s ease;
    z-index: 1;
}

.video-card::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent-1));
    border-radius: calc(var(--border-radius) + 2px);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.6s ease;
    filter: blur(20px);
}

.video-card:hover {
    transform: translateY(-15px) scale(1.05) rotateX(5deg) rotateY(5deg);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7),
                0 0 50px rgba(255, 0, 0, 0.3);
    border-color: var(--primary);
    z-index: 100;
}

.video-card:hover::before {
    opacity: 1;
    animation: shimmer 2s linear infinite;
}

.video-card:hover::after {
    opacity: 0.5;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}

.video-thumbnail {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    transform-style: preserve-3d;
}

.video-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: translateZ(20px);
}

.video-card:hover .video-thumbnail img {
    transform: scale(1.2) translateZ(30px);
    filter: brightness(1.2) contrast(1.1) saturate(1.3);
}

.video-thumbnail::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, transparent 50%, rgba(0, 0, 0, 0.8));
    opacity: 0;
    transition: opacity 0.6s ease;
}

.video-card:hover .video-thumbnail::after {
    opacity: 1;
}

.video-duration {
    position: absolute;
    bottom: 12px;
    right: 12px;
    background: rgba(0, 0, 0, 0.9);
    color: white;
    padding: 8px 12px;
    border-radius: var(--border-radius-sm);
    font-size: 13px;
    font-weight: 700;
    font-family: 'Orbitron', sans-serif;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transform: translateZ(30px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    transition: all 0.4s ease;
}

.video-card:hover .video-duration {
    background: var(--primary);
    transform: translateZ(40px) scale(1.1);
}

/* Video Info with Effects */
.video-info {
    padding: 20px;
    display: flex;
    gap: 16px;
    background: rgba(20, 20, 20, 0.9);
    backdrop-filter: blur(10px);
    transform-style: preserve-3d;
}

.channel-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    border: 3px solid transparent;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: translateZ(20px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    position: relative;
}

.channel-avatar::before {
    content: '';
    position: absolute;
    top: -3px;
    left: -3px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
    background: linear-gradient(45deg, var(--primary), var(--secondary));
    z-index: -1;
    opacity: 0;
    transition: opacity 0.4s ease;
}

.video-card:hover .channel-avatar {
    transform: translateZ(30px) scale(1.2) rotate(10deg);
    border-color: var(--primary);
}

.video-card:hover .channel-avatar::before {
    opacity: 1;
    animation: avatarBorderGlow 2s ease-in-out infinite alternate;
}

@keyframes avatarBorderGlow {
    0% {
        filter: blur(5px);
        opacity: 0.5;
    }
    100% {
        filter: blur(10px);
        opacity: 0.8;
    }
}

.video-content {
    flex: 1;
    min-width: 0;
    transform: translateZ(20px);
}

.video-title {
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
    font-size: 17px;
    margin-bottom: 10px;
    line-height: 1.4;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    transition: all 0.4s ease;
    color: var(--text-primary);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.video-card:hover .video-title {
    color: var(--primary);
    transform: translateZ(25px);
    text-shadow: 0 0 20px var(--primary);
}

.channel-name {
    font-size: 14px;
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    color: var(--text-secondary);
    margin-bottom: 8px;
    transition: all 0.4s ease;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.video-card:hover .channel-name {
    color: var(--text-primary);
    transform: translateZ(20px);
    letter-spacing: 1px;
}

.video-stats {
    font-size: 13px;
    font-family: 'Orbitron', sans-serif;
    color: var(--text-tertiary);
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    font-weight: 500;
    letter-spacing: 1px;
    transform: translateZ(15px);
}

.video-stats span {
    transition: all 0.4s ease;
}

.video-card:hover .video-stats span {
    color: var(--text-secondary);
    transform: translateZ(20px);
}

.video-card:hover .video-stats span:first-child {
    color: var(--primary);
    text-shadow: 0 0 10px var(--primary);
}

/* AI Badge Effect */
.video-stats .ai-badge {
    background: linear-gradient(45deg, var(--accent-1), var(--accent-2));
    color: black;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 900;
    letter-spacing: 1.5px;
    position: relative;
    overflow: hidden;
}

.video-stats .ai-badge::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transform: rotate(45deg);
    animation: aiShimmer 2s linear infinite;
}

@keyframes aiShimmer {
    0% {
        transform: translateX(-100%) rotate(45deg);
    }
    100% {
        transform: translateX(100%) rotate(45deg);
    }
}

/* Video Modal - Ultimate Immersion */
.video-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.98);
    z-index: 20000;
    display: none;
    animation: modalFadeIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    backdrop-filter: blur(50px);
}

@keyframes modalFadeIn {
    from {
        opacity: 0;
        backdrop-filter: blur(0);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(50px);
    }
}

.video-modal.show {
    display: flex;
}

.video-modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at center, rgba(255,0,0,0.1) 0%, transparent 70%);
    animation: modalBgPulse 4s ease-in-out infinite alternate;
}

@keyframes modalBgPulse {
    0% {
        opacity: 0.3;
        transform: scale(1);
    }
    100% {
        opacity: 0.5;
        transform: scale(1.1);
    }
}

.modal-content {
    max-width: 1800px;
    margin: 0 auto;
    padding: 32px;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    position: relative;
    z-index: 1;
}

.modal-header {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 24px;
    animation: slideDown 0.6s ease 0.3s backwards;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.close-modal {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--text-primary);
    width: 56px;
    height: 56px;
    border-radius: 50%;
    cursor: none;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
    border: 2px solid transparent;
}

.close-modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, var(--primary), var(--danger));
    opacity: 0;
    transition: opacity 0.4s ease;
    border-radius: 50%;
}

.close-modal::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--danger));
    border-radius: 50%;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.4s ease;
    filter: blur(20px);
}

.close-modal:hover {
    transform: scale(1.2) rotate(180deg);
    border-color: var(--primary);
}

.close-modal:hover::before {
    opacity: 0.2;
}

.close-modal:hover::after {
    opacity: 0.5;
    animation: closeBtnGlow 1s ease-in-out infinite alternate;
}

@keyframes closeBtnGlow {
    0% {
        filter: blur(20px);
        opacity: 0.3;
    }
    100% {
        filter: blur(30px);
        opacity: 0.6;
    }
}

.close-modal i {
    font-size: 24px;
    transition: transform 0.4s ease;
}

.close-modal:hover i {
    transform: scale(1.3);
}

/* Modal Body Layout */
.modal-body {
    display: flex;
    gap: 32px;
    flex: 1;
    animation: modalBodyAppear 0.6s ease 0.4s backwards;
}

@keyframes modalBodyAppear {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.video-player-container {
    flex: 3;
    min-width: 0;
    display: flex;
    flex-direction: column;
}

.video-player {
    width: 100%;
    aspect-ratio: 16 / 9;
    background: #000;
    border-radius: var(--border-radius);
    overflow: hidden;
    flex-shrink: 0;
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.8),
                0 0 80px rgba(255, 0, 0, 0.3);
    transform-style: preserve-3d;
    transform: perspective(1000px) rotateX(0deg);
    transition: transform 0.6s ease;
    border: 2px solid rgba(255, 255, 255, 0.1);
    position: relative;
}

.video-player:hover {
    transform: perspective(1000px) rotateX(5deg);
}

.video-player::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, var(--primary), var(--secondary), var(--accent-1));
    border-radius: var(--border-radius);
    z-index: -1;
    opacity: 0.3;
    filter: blur(30px);
    animation: playerGlow 3s ease-in-out infinite alternate;
}

@keyframes playerGlow {
    0% {
        opacity: 0.2;
        filter: blur(20px);
    }
    100% {
        opacity: 0.4;
        filter: blur(40px);
    }
}

/* Action Buttons with Particle Effects */
.video-actions-bar {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 20px;
    position: relative;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 28px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid transparent;
    border-radius: var(--border-radius-full);
    color: var(--text-primary);
    cursor: none;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 15px;
    letter-spacing: 1px;
    text-transform: uppercase;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(10px);
}

.action-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.7s ease;
}

.action-btn:hover::before {
    left: 100%;
}

.action-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-5px) scale(1.1);
    border-color: var(--primary);
    box-shadow: 0 15px 35px rgba(255, 0, 0, 0.4),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
    letter-spacing: 2px;
}

.action-btn.liked {
    background: rgba(255, 0, 0, 0.2);
    color: var(--primary);
    border-color: var(--primary);
    animation: likePulse 1s ease-in-out infinite alternate;
}

@keyframes likePulse {
    0% {
        box-shadow: 0 5px 20px rgba(255, 0, 0, 0.3);
    }
    100% {
        box-shadow: 0 5px 40px rgba(255, 0, 0, 0.6),
                    inset 0 0 20px rgba(255, 255, 255, 0.2);
    }
}

.action-btn i {
    font-size: 20px;
    transition: transform 0.4s ease;
}

.action-btn:hover i {
    transform: scale(1.3) rotate(15deg);
}

/* Comments Section - Advanced */
.comments-section {
    background: rgba(25, 25, 25, 0.8);
    backdrop-filter: blur(30px);
    border-radius: var(--border-radius);
    padding: 32px;
    margin-top: 24px;
    flex: 1;
    min-height: 500px;
    max-height: 600px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    border-left: 6px solid var(--info);
    animation: commentsSlideIn 0.6s ease 0.5s backwards;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

@keyframes commentsSlideIn {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.comments-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 32px;
    padding-bottom: 16px;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
}

.comments-count {
    font-family: 'Orbitron', sans-serif;
    font-size: 24px;
    font-weight: 700;
    background: linear-gradient(45deg, var(--info), var(--accent-2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 2px;
    position: relative;
}

.comments-count::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 60px;
    height: 3px;
    background: linear-gradient(to right, var(--info), var(--accent-2));
    border-radius: 2px;
    box-shadow: 0 0 20px var(--info);
}

.comment-form {
    display: flex;
    gap: 20px;
    margin-bottom: 32px;
    padding: 24px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: var(--border-radius);
    border: 2px solid rgba(255, 255, 255, 0.1);
    transition: all 0.4s ease;
}

.comment-form:focus-within {
    border-color: var(--info);
    background: rgba(52, 152, 219, 0.1);
    transform: translateY(-5px);
    box-shadow: 0 20px 40px rgba(52, 152, 219, 0.2);
}

.comment-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    border: 3px solid transparent;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
}

.comment-avatar:hover {
    transform: scale(1.2) rotate(10deg);
    border-color: var(--info);
    box-shadow: 0 0 40px var(--info);
}

.comment-input-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.comment-input {
    width: 100%;
    padding: 20px 24px;
    background: rgba(255, 255, 255, 0.08);
    border: 2px solid transparent;
    border-radius: var(--border-radius);
    color: var(--text-primary);
    font-size: 16px;
    font-family: 'Poppins', sans-serif;
    outline: none;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    backdrop-filter: blur(10px);
    resize: vertical;
    min-height: 120px;
}

.comment-input:focus {
    border-color: var(--info);
    background: rgba(255, 255, 255, 0.12);
    transform: translateY(-3px);
    box-shadow: 0 20px 40px rgba(52, 152, 219, 0.3),
                inset 0 0 30px rgba(255, 255, 255, 0.1);
}

.comment-submit {
    background: linear-gradient(45deg, var(--info), var(--accent-2));
    color: white;
    border: none;
    padding: 16px 32px;
    border-radius: var(--border-radius-full);
    font-weight: 700;
    font-family: 'Rajdhani', sans-serif;
    font-size: 16px;
    cursor: none;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    align-self: flex-end;
    min-width: 140px;
    position: relative;
    overflow: hidden;
    letter-spacing: 1px;
    text-transform: uppercase;
    box-shadow: 0 10px 30px rgba(52, 152, 219, 0.4);
}

.comment-submit::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.8s, height 0.8s;
}

.comment-submit:hover::before {
    width: 400px;
    height: 400px;
}

.comment-submit:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 25px 50px rgba(52, 152, 219, 0.6),
                inset 0 0 40px rgba(255, 255, 255, 0.2);
    letter-spacing: 2px;
}

.comment-submit:active {
    transform: translateY(0) scale(0.95);
    transition: all 0.1s ease;
}

.comments-list {
    flex: 1;
    overflow-y: auto;
    padding-right: 12px;
    animation: commentsListAppear 0.6s ease 0.6s backwards;
}

@keyframes commentsListAppear {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Custom scrollbar with effects */
.comments-list::-webkit-scrollbar {
    width: 10px;
}

.comments-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 5px;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
}

.comments-list::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--info), var(--accent-2));
    border-radius: 5px;
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.2),
                0 0 20px var(--info);
    transition: all 0.3s ease;
}

.comments-list::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, var(--accent-2), var(--info));
    box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.3),
                0 0 30px var(--accent-2);
}

/* Comment Items with Holographic Effects */
.comment-item {
    display: flex;
    gap: 20px;
    padding: 24px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    animation: commentSlideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) backwards;
    transform-style: preserve-3d;
    position: relative;
    transition: all 0.4s ease;
    border-radius: var(--border-radius-sm);
    margin-bottom: 12px;
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
}

@keyframes commentSlideIn {
    from {
        opacity: 0;
        transform: translateX(-30px) rotateY(45deg);
    }
    to {
        opacity: 1;
        transform: translateX(0) rotateY(0);
    }
}

.comment-item:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateX(10px) translateZ(20px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3),
                0 0 30px rgba(52, 152, 219, 0.2);
    border-left: 4px solid var(--info);
}

.comment-item:last-child {
    border-bottom: none;
}

.comment-content {
    flex: 1;
    transform-style: preserve-3d;
}

.comment-header {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 16px;
    flex-wrap: wrap;
}

.comment-author {
    font-family: 'Rajdhani', sans-serif;
    font-weight: 700;
    font-size: 16px;
    color: var(--text-primary);
    transition: all 0.4s ease;
    letter-spacing: 1px;
    position: relative;
    display: inline-block;
}

.comment-author::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--info);
    transition: width 0.4s ease;
}

.comment-item:hover .comment-author {
    color: var(--info);
    transform: translateZ(20px);
}

.comment-item:hover .comment-author::after {
    width: 100%;
}

.comment-time {
    color: var(--text-tertiary);
    font-size: 13px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 500;
    letter-spacing: 1px;
    transition: all 0.4s ease;
}

.comment-item:hover .comment-time {
    color: var(--text-secondary);
    transform: translateZ(15px);
}

.comment-text {
    font-size: 15px;
    font-family: 'Poppins', sans-serif;
    line-height: 1.6;
    margin-bottom: 20px;
    color: var(--text-primary);
    word-break: break-word;
    transition: all 0.4s ease;
    transform: translateZ(10px);
}

.comment-item:hover .comment-text {
    color: var(--text-secondary);
    transform: translateZ(25px);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
}

.comment-actions {
    display: flex;
    gap: 24px;
    align-items: center;
    margin-top: 20px;
    transform: translateZ(15px);
}

.comment-like {
    display: flex;
    align-items: center;
    gap: 8px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid transparent;
    color: var(--text-secondary);
    cursor: none;
    font-size: 13px;
    padding: 10px 20px;
    border-radius: var(--border-radius-full);
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
}

.comment-like::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.6s ease;
}

.comment-like:hover::before {
    left: 100%;
}

.comment-like:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-3px) scale(1.1);
    border-color: var(--info);
    color: var(--text-primary);
    box-shadow: 0 10px 25px rgba(52, 152, 219, 0.3);
}

.comment-like.liked {
    background: rgba(52, 152, 219, 0.2);
    color: var(--info);
    border-color: var(--info);
    animation: commentLikePulse 1s ease-in-out infinite alternate;
}

@keyframes commentLikePulse {
    0% {
        box-shadow: 0 5px 20px rgba(52, 152, 219, 0.3);
    }
    100% {
        box-shadow: 0 5px 35px rgba(52, 152, 219, 0.5),
                    inset 0 0 20px rgba(255, 255, 255, 0.1);
    }
}

.comment-like i {
    font-size: 16px;
    transition: transform 0.4s ease;
}

.comment-like:hover i {
    transform: scale(1.3) rotate(15deg);
}

.comment-reply {
    background: transparent;
    border: 2px solid rgba(255, 255, 255, 0.2);
    color: var(--text-secondary);
    cursor: none;
    font-size: 13px;
    padding: 10px 20px;
    border-radius: var(--border-radius-full);
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    font-family: 'Rajdhani', sans-serif;
    font-weight: 600;
    letter-spacing: 1px;
    position: relative;
    overflow: hidden;
    backdrop-filter: blur(5px);
}

.comment-reply:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-3px) scale(1.1);
    border-color: var(--accent-2);
    color: var(--accent-2);
    box-shadow: 0 10px 25px rgba(0, 255, 255, 0.3);
}

/* Notification System */
.notification {
    position: fixed;
    top: 30px;
    right: 30px;
    padding: 24px 32px;
    border-radius: var(--border-radius);
    background: rgba(25, 25, 25, 0.95);
    backdrop-filter: blur(30px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(255, 0, 0, 0.3);
    z-index: 30000;
    display: none;
    align-items: center;
    gap: 20px;
    max-width: 450px;
    animation: notificationSlideIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275),
               notificationGlow 2s ease-in-out infinite alternate;
    transform-origin: top right;
}

@keyframes notificationSlideIn {
    from {
        opacity: 0;
        transform: translateX(100px) rotateY(90deg);
        filter: blur(20px);
    }
    to {
        opacity: 1;
        transform: translateX(0) rotateY(0);
        filter: blur(0);
    }
}

@keyframes notificationGlow {
    0% {
        box-shadow: var(--shadow-lg),
                    0 0 30px rgba(255, 0, 0, 0.2);
    }
    100% {
        box-shadow: var(--shadow-lg),
                    0 0 70px rgba(255, 0, 0, 0.4);
    }
}

.notification.show {
    display: flex;
}

.notification.success {
    border-left: 6px solid var(--success);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(46, 204, 113, 0.3);
}

.notification.error {
    border-left: 6px solid var(--danger);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(231, 76, 60, 0.3);
}

.notification.info {
    border-left: 6px solid var(--info);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(52, 152, 219, 0.3);
}

.notification.warning {
    border-left: 6px solid var(--warning);
    box-shadow: var(--shadow-lg),
                0 0 50px rgba(243, 156, 18, 0.3);
}

.notification i {
    font-size: 32px;
    animation: notificationIconFloat 2s ease-in-out infinite alternate;
}

@keyframes notificationIconFloat {
    0% {
        transform: translateY(0) scale(1);
    }
    100% {
        transform: translateY(-10px) scale(1.1);
    }
}

/* Loading Effects */
.loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 80px;
    gap: 32px;
    position: relative;
}

.loading-spinner {
    width: 80px;
    height: 80px;
    border: 5px solid transparent;
    border-top-color: var(--primary);
    border-right-color: var(--secondary);
    border-bottom-color: var(--accent-1);
    border-left-color: var(--accent-2);
    border-radius: 50%;
    animation: spin 1.5s linear infinite,
               colorShift 3s linear infinite;
    position: relative;
    box-shadow: 0 0 40px rgba(255, 0, 0, 0.3);
}

.loading-spinner::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    border: 5px solid transparent;
    border-radius: 50%;
    animation: spin 2s linear infinite reverse;
    border-top-color: rgba(255, 0, 0, 0.3);
    border-bottom-color: rgba(0, 95, 212, 0.3);
}

@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes colorShift {
    0% {
        border-top-color: var(--primary);
        border-right-color: var(--secondary);
        border-bottom-color: var(--accent-1);
        border-left-color: var(--accent-2);
    }
    25% {
        border-top-color: var(--accent-2);
        border-right-color: var(--primary);
        border-bottom-color: var(--secondary);
        border-left-color: var(--accent-1);
    }
    50% {
        border-top-color: var(--accent-1);
        border-right-color: var(--accent-2);
        border-bottom-color: var(--primary);
        border-left-color: var(--secondary);
    }
    75% {
        border-top-color: var(--secondary);
        border-right-color: var(--accent-1);
        border-bottom-color: var(--accent-2);
        border-left-color: var(--primary);
    }
    100% {
        border-top-color: var(--primary);
        border-right-color: var(--secondary);
        border-bottom-color: var(--accent-1);
        border-left-color: var(--accent-2);
    }
}

/* Empty State Effects */
.empty-state {
    grid-column: 1 / -1;
    text-align: center;
    padding: 80px;
    color: var(--text-tertiary);
    position: relative;
    overflow: hidden;
    border-radius: var(--border-radius);
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px);
    border: 2px dashed rgba(255, 255, 255, 0.1);
}

.empty-state i {
    font-size: 80px;
    margin-bottom: 32px;
    opacity: 0.5;
    animation: emptyStateFloat 4s ease-in-out infinite,
               emptyStateGlow 2s ease-in-out infinite alternate;
    filter: drop-shadow(0 0 20px currentColor);
}

@keyframes emptyStateFloat {
    0%, 100% {
        transform: translateY(0) rotate(0deg);
    }
    25% {
        transform: translateY(-30px) rotate(5deg);
    }
    75% {
        transform: translateY(-15px) rotate(-5deg);
    }
}

@keyframes emptyStateGlow {
    0% {
        filter: drop-shadow(0 0 10px currentColor);
    }
    100% {
        filter: drop-shadow(0 0 40px currentColor);
    }
}

.empty-state h3 {
    font-family: 'Orbitron', sans-serif;
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 16px;
    background: linear-gradient(45deg, var(--text-secondary), var(--text-primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 2px;
}

.empty-state p {
    font-size: 18px;
    font-family: 'Poppins', sans-serif;
    max-width: 500px;
    margin: 0 auto;
    line-height: 1.6;
    color: var(--text-secondary);
}

/* Responsive Design with Animation Adjustments */
@media (max-width: 1400px) {
    .sidebar {
        width: 100px;
    }
    
    .sidebar-item span {
        display: none;
    }
    
    .main-content {
        margin-left: 100px;
    }
    
    .modal-body {
        flex-direction: column;
        height: auto;
    }
    
    .video-sidebar {
        min-width: 100%;
        max-height: 500px;
    }
}

@media (max-width: 1024px) {
    .header {
        padding: 0 20px;
        gap: 24px;
    }
    
    .videos-grid {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 24px;
    }
    
    .upload-container {
        padding: 40px;
        margin: 0 20px;
    }
    
    .modal-content {
        padding: 24px;
    }
    
    .modal-body {
        flex-direction: column;
        gap: 24px;
        height: auto;
    }
    
    .comment-form {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .comment-input-container {
        width: 100%;
    }
    
    .comment-submit {
        align-self: flex-end;
    }
}

@media (max-width: 768px) {
    .header {
        padding: 0 16px;
        gap: 16px;
        height: 60px;
    }
    
    .logo {
        font-size: 22px;
    }
    
    .logo-icon {
        font-size: 26px;
    }
    
    .search-container {
        display: none !important;
    }
    
    .search-bar.mobile-visible {
        display: flex !important;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        margin: 0 16px;
        z-index: 10001;
        animation: mobileSearchSlide 0.4s ease;
    }
    
    @keyframes mobileSearchSlide {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .videos-grid {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
    }
    
    .sidebar {
        width: 80px;
        transform: translateX(-100%);
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .sidebar.visible {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0;
        padding: 20px;
    }
    
    .upload-btn span {
        display: none;
    }
    
    /* Disable heavy effects on mobile for performance */
    .cursor-container,
    .particles-js-canvas-el,
    .floating-element,
    .gradient-bg,
    .video-card::after,
    .video-card::before {
        display: none;
    }
    
    * {
        cursor: auto !important;
    }
}

@media (max-width: 480px) {
    .sidebar {
        width: 280px;
        transform: translateX(-100%);
    }
    
    .videos-grid {
        grid-template-columns: 1fr;
    }
    
    .video-player {
        aspect-ratio: 9 / 16;
    }
    
    .upload-container {
        padding: 32px 20px;
        margin: 0 12px;
    }
    
    .notification {
        top: 20px;
        right: 20px;
        left: 20px;
        max-width: none;
    }
    
    .comment-item {
        flex-direction: column;
        gap: 16px;
    }
    
    .comment-actions {
        justify-content: center;
    }
}

/* Mobile Menu Toggle */
.mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 24px;
    cursor: pointer;
    padding: 8px;
    transition: all 0.3s ease;
}

@media (max-width: 768px) {
    .mobile-menu-toggle {
        display: block;
    }
}

/* Search Toggle for Mobile */
.search-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    font-size: 20px;
    cursor: pointer;
    padding: 8px;
    transition: all 0.3s ease;
}

@media (max-width: 768px) {
    .search-toggle {
        display: block;
    }
}

/* Animation Performance Optimizations */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Print Styles */
@media print {
    .header,
    .sidebar,
    .upload-btn,
    .user-menu,
    .video-actions-bar,
    .comment-form,
    .comments-section {
        display: none !important;
    }
    
    .main-content {
        margin-left: 0;
        padding: 0;
    }
    
    .videos-grid {
        display: block;
    }
    
    .video-card {
        break-inside: avoid;
        margin-bottom: 20px;
        box-shadow: none;
        border: 1px solid #ccc;
    }
}

/* Button styles from original code (kept for compatibility) */
.btn-primary, .btn-secondary, .load-more-btn, .description-toggle {
    /* Keep original button styles */
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    border-radius: var(--border-radius-sm);
    font-weight: 500;
    cursor: none;
    transition: all 0.3s ease;
    border: none;
    position: relative;
    overflow: hidden;
}

.btn-primary {
    background: linear-gradient(45deg, var(--primary), var(--primary-dark));
    color: white;
}

.btn-secondary {
    background: var(--dark-surface-light);
    color: var(--text-primary);
}

.load-more-btn {
    background: var(--dark-surface-light);
    color: var(--text-primary);
}

.description-toggle {
    color: var(--text-secondary);
    background: none;
    border: none;
    padding: 4px 0;
}

/* Keep original video sidebar styles */
.video-sidebar {
    flex: 1;
    min-width: 300px;
    overflow-y: auto;
    height: 100%;
}

.video-sidebar::-webkit-scrollbar {
    width: 6px;
}

.video-sidebar::-webkit-scrollbar-track {
    background: var(--dark-surface-light);
}

.video-sidebar::-webkit-scrollbar-thumb {
    background: var(--dark-surface-hover);
    border-radius: 3px;
}

/* Keep original form row styles */
.form-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
}

.checkbox-group {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-top: 8px;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: none;
    font-size: 14px;
    transition: var(--transition);
}

.upload-actions {
    display: flex;
    gap: 12px;
    margin-top: 32px;
}
</style>
</head>
<body>

<!-- Background Effects -->
<div class="background-effects">
    <div class="gradient-bg"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
    <div class="floating-element"></div>
</div>

<!-- Particles Container -->
<div id="particles-js"></div>

<!-- Custom Cursor System -->
<div class="cursor-container">
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>
</div>

<!-- Header -->
<header class="header">
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>
    
    <a href="#" class="logo" id="logoBtn">
        <i class="fas fa-play-circle logo-icon"></i>
        <span>Vibro.x</span>
    </a>
    
    <div class="search-container">
        <div class="search-bar" id="searchBar">
            <input type="text" class="search-input" placeholder="Search videos..." id="searchInput">
            <button class="search-button" id="searchButton">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </div>
    
    <button class="search-toggle" id="searchToggle">
        <i class="fas fa-search"></i>
    </button>
    
    <div class="header-actions">
        <button class="upload-btn" id="uploadBtn">
            <i class="fas fa-upload"></i>
            <span>Upload</span>
        </button>
        
        <div class="user-menu">
            <img src="https://ui-avatars.com/api/?name=User&background=random" 
                 alt="User" 
                 class="user-avatar" 
                 id="userAvatar">
            
            <div class="user-dropdown" id="userDropdown">
                <div class="dropdown-header" id="dropdownHeader">
                    <h3>Guest User</h3>
                    <p>Sign in to upload videos</p>
                </div>
                <button class="dropdown-item" id="loginBtn">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Sign In</span>
                </button>
                <button class="dropdown-item" id="logoutBtn" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
                <button class="dropdown-item" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </button>
                <button class="dropdown-item" id="themeToggle">
                    <i class="fas fa-palette"></i>
                    <span>Toggle Theme</span>
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Sidebar -->
<nav class="sidebar" id="sidebar">
    <a href="#" class="sidebar-item active" id="homeBtn">
        <i class="fas fa-home"></i>
        <span>Home</span>
    </a>
    <a href="#" class="sidebar-item" id="trendingBtn">
        <i class="fas fa-fire"></i>
        <span>Trending</span>
    </a>
    <a href="#" class="sidebar-item" id="historyBtn">
        <i class="fas fa-history"></i>
        <span>History</span>
    </a>
    <a href="#" class="sidebar-item" id="likedBtn">
        <i class="fas fa-thumbs-up"></i>
        <span>Liked videos</span>
    </a>
    <a href="#" class="sidebar-item" id="yourVideosBtn">
        <i class="fas fa-play-circle"></i>
        <span>Your videos</span>
    </a>
    <a href="#" class="sidebar-item" id="watchLaterBtn">
        <i class="fas fa-clock"></i>
        <span>Watch later</span>
    </a>
</nav>

<!-- Main Content -->
<main class="main-container">
    <div class="main-content page-transition">
        <!-- Upload Section (Hidden by default) -->
        <div class="upload-container" id="uploadSection" style="display: none;">
            <h2 class="gradient-text">Upload Video</h2>
            
            <div class="upload-area" id="uploadArea">
                <div class="upload-icon">
                    <i class="fas fa-cloud-upload-alt"></i>
                </div>
                <h3>Select video to upload</h3>
                <p>or drag and drop video file</p>
                <p class="text-tertiary">MP4, WebM, MOV up to 500MB</p>
                <button class="btn-primary" id="selectFileBtn">
                    <i class="fas fa-file-video"></i>
                    Select Files
                </button>
            </div>
            
            <input type="file" id="videoFile" accept="video/*" style="display: none;">
            <input type="file" id="coverFile" accept="image/*" style="display: none;">
            
            <div id="fileInfo" class="file-info" style="display: none;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <h4 id="fileName"></h4>
                        <p id="fileSize" class="text-tertiary"></p>
                    </div>
                    <button class="btn-secondary" id="clearFileBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            
            <form id="uploadForm">
                <div class="form-group">
                    <label for="videoTitle">Title *</label>
                    <input type="text" id="videoTitle" placeholder="Enter video title" required>
                </div>
                
                <div class="form-group">
                    <label for="videoDescription">Description</label>
                    <textarea id="videoDescription" placeholder="Tell viewers about your video"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="videoCategory">Category</label>
                        <select id="videoCategory">
                            <option value="">Select category</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="music">Music</option>
                            <option value="gaming">Gaming</option>
                            <option value="education">Education</option>
                            <option value="sports">Sports</option>
                            <option value="tech">Technology</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="videoPrivacy">Privacy</label>
                        <select id="videoPrivacy">
                            <option value="public">Public</option>
                            <option value="unlisted">Unlisted</option>
                            <option value="private">Private</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Tags (comma separated)</label>
                    <input type="text" id="videoTags" placeholder="e.g., gaming, tutorial, vlog">
                </div>
                
                <div class="form-group">
                    <label>Video Settings</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="allowComments" checked>
                            <span>Allow comments</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="allowRatings" checked>
                            <span>Allow ratings</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="showViewCount" checked>
                            <span>Show view count</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="aiGenerated">
                            <span>AI Generated</span>
                        </label>
                    </div>
                </div>
                
                <div class="upload-actions">
                    <button type="submit" class="btn-primary" id="submitUploadBtn">
                        <i class="fas fa-upload"></i>
                        Upload Video
                    </button>
                    <button type="button" class="btn-secondary" id="cancelUploadBtn">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Videos Grid -->
        <div id="videosSection">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                <h2 class="gradient-text">Recommended Videos</h2>
                <div>
                    <select id="sortVideos" class="comments-sort">
                        <option value="newest">Newest first</option>
                        <option value="popular">Most popular</option>
                        <option value="oldest">Oldest first</option>
                    </select>
                </div>
            </div>
            
            <div class="videos-grid" id="videosList">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Loading videos...</p>
                </div>
            </div>
            
            <div class="load-more-comments" id="loadMoreContainer" style="display: none;">
                <button class="load-more-btn" id="loadMoreBtn">
                    <i class="fas fa-redo"></i>
                    Load More Videos
                </button>
            </div>
        </div>
    </div>
</main>

<!-- Video Player Modal -->
<div class="video-modal" id="videoModal">
    <div class="modal-content">
        <div class="modal-header">
            <button class="close-modal" id="closeModalBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="video-player-container">
                <video class="video-player" id="modalVideo" controls playsinline>
                    Your browser does not support the video tag.
                </video>
                
                <div class="video-details">
                    <h1 class="video-title-large gradient-text" id="modalVideoTitle"></h1>
                    
                    <div class="video-meta">
                        <div class="video-views" id="modalVideoMeta"></div>
                        <div class="video-actions-bar">
                            <button class="action-btn" id="likeBtn">
                                <i class="far fa-thumbs-up"></i>
                                <span id="likeCount">0</span>
                            </button>
                            <button class="action-btn" id="shareBtn">
                                <i class="fas fa-share"></i>
                                <span>Share</span>
                            </button>
                            <button class="action-btn" id="saveBtn">
                                <i class="far fa-bookmark"></i>
                                <span>Save</span>
                            </button>
                            <button class="action-btn" id="reportBtn">
                                <i class="fas fa-flag"></i>
                                <span>Report</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="video-description">
                        <div id="videoDescriptionShort"></div>
                        <div id="videoDescriptionFull" style="display: none;"></div>
                        <button class="description-toggle" id="descriptionToggleBtn">
                            Show more
                        </button>
                    </div>
                </div>
                
                <!-- Comments Section -->
                <div class="comments-section" id="commentsSection">
                    <div class="comments-header">
                        <h3 class="comments-count" id="commentsCount">Comments</h3>
                        <select class="comments-sort" id="commentsSort">
                            <option value="newest">Newest first</option>
                            <option value="top">Top comments</option>
                            <option value="oldest">Oldest first</option>
                        </select>
                    </div>
                    
                    <div class="comment-form" id="commentForm">
                        <img src="https://ui-avatars.com/api/?name=User&background=random" 
                             alt="Your avatar" 
                             class="comment-avatar"
                             id="commentAvatar">
                        <div class="comment-input-container">
                            <input type="text" 
                                   class="comment-input" 
                                   id="commentInput" 
                                   placeholder="Add a comment...">
                            <button class="comment-submit" id="commentSubmitBtn">
                                Comment
                            </button>
                        </div>
                    </div>
                    
                    <div class="comments-list" id="commentsList">
                        <div class="loading">
                            <div class="loading-spinner"></div>
                            <p>Loading comments...</p>
                        </div>
                    </div>
                    
                    <div class="load-more-comments" id="loadMoreComments" style="display: none;">
                        <button class="load-more-btn" id="loadMoreCommentsBtn">
                            Load more comments
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="video-sidebar" id="recommendedVideos">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <p>Loading recommendations...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Notifications -->
<div class="notification" id="notification"></div>

<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script>
// =============== PARTICLE BACKGROUND ===============
particlesJS('particles-js', {
    particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: "#ff0000" },
        shape: {
            type: "circle",
            stroke: { width: 0, color: "#000000" }
        },
        opacity: {
            value: 0.5,
            random: true,
            anim: { enable: true, speed: 1, opacity_min: 0.1, sync: false }
        },
        size: {
            value: 3,
            random: true,
            anim: { enable: true, speed: 2, size_min: 0.1, sync: false }
        },
        line_linked: {
            enable: true,
            distance: 150,
            color: "#ff0000",
            opacity: 0.2,
            width: 1
        },
        move: {
            enable: true,
            speed: 2,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false,
            attract: { enable: false, rotateX: 600, rotateY: 1200 }
        }
    },
    interactivity: {
        detect_on: "canvas",
        events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" },
            resize: true
        },
        modes: {
            grab: { distance: 400, line_linked: { opacity: 1 } },
            bubble: { distance: 400, size: 40, duration: 2, opacity: 8, speed: 3 },
            repulse: { distance: 200, duration: 0.4 },
            push: { particles_nb: 4 },
            remove: { particles_nb: 2 }
        }
    },
    retina_detect: true
});

// =============== ADVANCED CURSOR SYSTEM ===============
class AdvancedCursor {
    constructor() {
        this.dot = document.querySelector('.cursor-dot');
        this.outline = document.querySelector('.cursor-outline');
        this.trails = [];
        this.particles = [];
        this.sparkles = [];
        this.x = 0;
        this.y = 0;
        this.lastX = 0;
        this.lastY = 0;
        this.velocity = { x: 0, y: 0 };
        this.acceleration = { x: 0, y: 0 };
        this.hoverState = 'default';
        this.effectMode = 'default';
        this.effects = [
            'ripple', 'pulse', 'spin', 'bounce', 'shake',
            'color-cycle', 'rainbow', 'expand', 'rotate', 'wave'
        ];
        this.currentEffect = 0;
        this.effectInterval = null;
        this.isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
        
        this.init();
    }
    
    init() {
        if (this.isMobile) {
            this.dot.style.display = 'none';
            this.outline.style.display = 'none';
            return;
        }
        
        this.bindEvents();
        this.animate();
        this.startEffectCycle();
    }
    
    bindEvents() {
        document.addEventListener('mousemove', (e) => this.onMouseMove(e));
        document.addEventListener('mousedown', (e) => this.onMouseDown(e));
        document.addEventListener('mouseup', (e) => this.onMouseUp(e));
        document.addEventListener('mouseenter', (e) => this.onMouseEnter(e));
        document.addEventListener('mouseleave', (e) => this.onMouseLeave(e));
        
        // Hover detection
        document.addEventListener('mouseover', (e) => this.detectHover(e));
        document.addEventListener('mouseout', (e) => this.detectHover(e));
    }
    
    onMouseMove(e) {
        this.lastX = this.x;
        this.lastY = this.y;
        this.x = e.clientX;
        this.y = e.clientY;
        
        this.velocity.x = this.x - this.lastX;
        this.velocity.y = this.y - this.lastY;
        
        this.acceleration.x = this.velocity.x - (this.lastX - (this.x - this.velocity.x));
        this.acceleration.y = this.velocity.y - (this.lastY - (this.y - this.velocity.y));
        
        // Create trail
        if (Math.abs(this.velocity.x) > 2 || Math.abs(this.velocity.y) > 2) {
            this.createTrail();
        }
        
        // Create particles at high speed
        if (Math.abs(this.velocity.x) > 10 || Math.abs(this.velocity.y) > 10) {
            this.createParticles();
        }
        
        // Update cursor position
        this.dot.style.left = `${this.x}px`;
        this.dot.style.top = `${this.y}px`;
        this.outline.style.left = `${this.x}px`;
        this.outline.style.top = `${this.y}px`;
        
        // Add subtle rotation based on velocity
        const rotation = Math.atan2(this.velocity.y, this.velocity.x) * (180 / Math.PI);
        this.outline.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
    }
    
    onMouseDown(e) {
        this.dot.classList.add('cursor-click');
        this.outline.style.transform = 'translate(-50%, -50%) scale(0.8)';
        
        // Create ripple effect
        this.createRipple();
        
        // Create sparkles on click
        this.createSparkles(10);
    }
    
    onMouseUp(e) {
        this.outline.style.transform = 'translate(-50%, -50%) scale(1)';
        setTimeout(() => {
            this.dot.classList.remove('cursor-click');
        }, 300);
    }
    
    onMouseEnter(e) {
        this.dot.style.opacity = '1';
        this.outline.style.opacity = '1';
    }
    
    onMouseLeave(e) {
        this.dot.style.opacity = '0';
        this.outline.style.opacity = '0';
    }
    
    detectHover(e) {
        const target = e.target;
        
        // Reset classes
        this.dot.classList.remove('hover-button', 'hover-video', 'hover-text', 'hover-input', 'hover-danger', 'hover-success');
        this.outline.classList.remove('hover-button', 'hover-video');
        
        if (target.matches('button, .btn, .action-btn, .upload-btn, .search-button')) {
            this.hoverState = 'button';
            this.dot.classList.add('hover-button');
            this.outline.classList.add('hover-button');
        } else if (target.matches('.video-card, .video-player, .video-thumbnail')) {
            this.hoverState = 'video';
            this.dot.classList.add('hover-video');
            this.outline.classList.add('hover-video');
        } else if (target.matches('h1, h2, h3, h4, h5, h6, p, span, .video-title')) {
            this.hoverState = 'text';
            this.dot.classList.add('hover-text');
        } else if (target.matches('input, textarea, select')) {
            this.hoverState = 'input';
            this.dot.classList.add('hover-input');
        } else if (target.matches('.danger, .error, [data-danger]')) {
            this.hoverState = 'danger';
            this.dot.classList.add('hover-danger');
        } else if (target.matches('.success, [data-success]')) {
            this.hoverState = 'success';
            this.dot.classList.add('hover-success');
        } else {
            this.hoverState = 'default';
        }
    }
    
    createTrail() {
        for (let i = 0; i < 3; i++) {
            setTimeout(() => {
                const trail = document.createElement('div');
                trail.className = `cursor-trail trail-${i + 1}`;
                trail.style.left = `${this.x}px`;
                trail.style.top = `${this.y}px`;
                trail.style.background = this.dot.style.background || getComputedStyle(this.dot).backgroundColor;
                
                document.querySelector('.cursor-container').appendChild(trail);
                
                setTimeout(() => {
                    if (trail.parentNode) {
                        trail.parentNode.removeChild(trail);
                    }
                }, 600);
            }, i * 50);
        }
    }
    
    createParticles() {
        const particleCount = 5;
        const colors = ['#ff0000', '#065fd4', '#00ff00', '#ffff00', '#ff00ff', '#00ffff'];
        
        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'cursor-particle';
            particle.style.left = `${this.x}px`;
            particle.style.top = `${this.y}px`;
            particle.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            const angle = Math.random() * Math.PI * 2;
            const speed = 2 + Math.random() * 3;
            const distance = 20 + Math.random() * 50;
            
            particle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
            particle.style.setProperty('--ty', `${Math.sin(angle) * distance}px`);
            
            document.querySelector('.cursor-container').appendChild(particle);
            
            particle.animate([
                { opacity: 1, transform: `translate(0, 0) scale(1)` },
                { opacity: 0, transform: `translate(var(--tx), var(--ty)) scale(0)` }
            ], {
                duration: 1000 + Math.random() * 500,
                easing: 'cubic-bezier(0.2, 0, 0.8, 1)'
            }).onfinish = () => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            };
        }
    }
    
    createRipple() {
        const ripple = document.createElement('div');
        ripple.className = 'cursor-dot effect-ripple';
        ripple.style.left = `${this.x}px`;
        ripple.style.top = `${this.y}px`;
        ripple.style.width = '8px';
        ripple.style.height = '8px';
        ripple.style.background = this.dot.style.background || getComputedStyle(this.dot).backgroundColor;
        
        document.querySelector('.cursor-container').appendChild(ripple);
        
        setTimeout(() => {
            if (ripple.parentNode) {
                ripple.parentNode.removeChild(ripple);
            }
        }, 600);
    }
    
    createSparkles(count) {
        for (let i = 0; i < count; i++) {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.style.left = `${this.x + (Math.random() - 0.5) * 50}px`;
            sparkle.style.top = `${this.y + (Math.random() - 0.5) * 50}px`;
            
            const size = 2 + Math.random() * 4;
            sparkle.style.width = `${size}px`;
            sparkle.style.height = `${size}px`;
            
            const angle = Math.random() * Math.PI * 2;
            const distance = 50 + Math.random() * 100;
            sparkle.style.setProperty('--tx', `${Math.cos(angle) * distance}px`);
            
            document.querySelector('.cursor-container').appendChild(sparkle);
            
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                }
            }, 1000);
        }
    }
    
    startEffectCycle() {
        this.effectInterval = setInterval(() => {
            this.cycleEffect();
        }, 5000); // Change effect every 5 seconds
    }
    
    cycleEffect() {
        // Remove all effect classes
        this.effects.forEach(effect => {
            this.dot.classList.remove(`effect-${effect}`);
            this.outline.classList.remove(`effect-${effect}`);
        });
        
        // Apply new effect
        const effect = this.effects[this.currentEffect];
        this.dot.classList.add(`effect-${effect}`);
        
        if (['expand', 'rotate', 'wave', 'dash'].includes(effect)) {
            this.outline.classList.add(`effect-${effect}`);
        }
        
        this.currentEffect = (this.currentEffect + 1) % this.effects.length;
    }
    
    animate() {
        // Smooth cursor movement
        const smoothX = this.x + this.velocity.x * 0.5;
        const smoothY = this.y + this.velocity.y * 0.5;
        
        this.dot.style.left = `${smoothX}px`;
        this.dot.style.top = `${smoothY}px`;
        
        // Outline follows with delay
        const outlineX = this.outline.offsetLeft + (smoothX - this.outline.offsetLeft) * 0.1;
        const outlineY = this.outline.offsetTop + (smoothY - this.outline.offsetTop) * 0.1;
        
        this.outline.style.left = `${outlineX}px`;
        this.outline.style.top = `${outlineY}px`;
        
        requestAnimationFrame(() => this.animate());
    }
}

// =============== SOUND EFFECTS SYSTEM ===============
class SoundEffects {
    constructor() {
        this.audioContext = null;
        this.sounds = new Map();
        this.enabled = true;
        this.init();
    }
    
    init() {
        try {
            this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
            this.preloadSounds();
        } catch (e) {
            console.log('Web Audio API not supported');
            this.enabled = false;
        }
    }
    
    preloadSounds() {
        // Preload common sound effects
        this.createSound('click', 800, 200, 0.1);
        this.createSound('hover', 400, 600, 0.05);
        this.createSound('success', 523.25, 1046.5, 0.3);
        this.createSound('error', 220, 110, 0.2);
        this.createSound('notification', 659.25, 830.61, 0.15);
        this.createSound('upload', 261.63, 523.25, 0.4);
    }
    
    createSound(name, freq1, freq2, duration) {
        if (!this.enabled) return;
        
        this.sounds.set(name, { freq1, freq2, duration });
    }
    
    play(name) {
        if (!this.enabled || !this.sounds.has(name)) return;
        
        const sound = this.sounds.get(name);
        const oscillator = this.audioContext.createOscillator();
        const gainNode = this.audioContext.createGain();
        
        oscillator.connect(gainNode);
        gainNode.connect(this.audioContext.destination);
        
        oscillator.frequency.setValueAtTime(sound.freq1, this.audioContext.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(sound.freq2, this.audioContext.currentTime + sound.duration);
        
        gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + sound.duration);
        
        oscillator.start();
        oscillator.stop(this.audioContext.currentTime + sound.duration);
    }
}

// =============== ANIMATION CONTROLLER ===============
class AnimationController {
    constructor() {
        this.animations = new Map();
        this.init();
    }
    
    init() {
        // Setup intersection observer for scroll animations
        this.observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    this.animateElement(entry.target);
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '50px'
        });
        
        // Observe all animatable elements
        document.querySelectorAll('.video-card, .form-group, .comment-item').forEach(el => {
            this.observer.observe(el);
        });
    }
    
    animateElement(element) {
        if (element.classList.contains('animated')) return;
        
        element.classList.add('animated');
        
        // Add different animations based on element type
        if (element.classList.contains('video-card')) {
            this.animateVideoCard(element);
        } else if (element.classList.contains('comment-item')) {
            this.animateComment(element);
        } else if (element.classList.contains('form-group')) {
            this.animateFormGroup(element);
        }
    }
    
    animateVideoCard(card) {
        // Simple fade-in animation since we don't have GSAP
        card.style.animation = 'cardAppear 0.6s ease backwards';
    }
    
    animateComment(comment) {
        comment.style.animation = 'commentSlideIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) backwards';
    }
    
    animateFormGroup(formGroup) {
        formGroup.style.animation = 'fadeInUp 0.6s ease';
    }
    
    shakeElement(element) {
        element.style.animation = 'shakeEffect 0.5s ease-in-out';
        setTimeout(() => {
            element.style.animation = '';
        }, 500);
    }
    
    pulseElement(element) {
        element.style.animation = 'pulseEffect 0.5s ease-in-out';
        setTimeout(() => {
            element.style.animation = '';
        }, 500);
    }
}

// =============== THEME MANAGER ===============
class ThemeManager {
    constructor() {
        this.themes = {
            dark: {
                '--primary': '#ff0000',
                '--primary-dark': '#cc0000',
                '--primary-light': '#ff3333',
                '--secondary': '#065fd4',
                '--secondary-light': '#4d8eff',
                '--accent-1': '#ff00ff',
                '--accent-2': '#00ffff',
                '--accent-3': '#ffff00',
                '--accent-4': '#00ff00',
                '--dark-bg': '#0a0a0a',
                '--darker-bg': '#050505',
                '--dark-surface': '#151515',
                '--dark-surface-light': '#222222',
                '--dark-surface-hover': '#333333',
                '--text-primary': '#ffffff',
                '--text-secondary': '#cccccc',
                '--text-tertiary': '#888888',
                '--border-color': '#404040'
            },
            light: {
                '--primary': '#ff0000',
                '--primary-dark': '#cc0000',
                '--primary-light': '#ff3333',
                '--secondary': '#065fd4',
                '--secondary-light': '#4d8eff',
                '--accent-1': '#ff00ff',
                '--accent-2': '#00ffff',
                '--accent-3': '#ffff00',
                '--accent-4': '#00ff00',
                '--dark-bg': '#f5f5f5',
                '--darker-bg': '#e0e0e0',
                '--dark-surface': '#ffffff',
                '--dark-surface-light': '#f0f0f0',
                '--dark-surface-hover': '#e5e5e5',
                '--text-primary': '#000000',
                '--text-secondary': '#333333',
                '--text-tertiary': '#666666',
                '--border-color': '#cccccc'
            },
            neon: {
                '--primary': '#ff0000',
                '--primary-dark': '#cc0000',
                '--primary-light': '#ff3333',
                '--secondary': '#00ffff',
                '--secondary-light': '#80ffff',
                '--accent-1': '#ff00ff',
                '--accent-2': '#ffff00',
                '--accent-3': '#00ff00',
                '--accent-4': '#ff8000',
                '--dark-bg': '#000000',
                '--darker-bg': '#000000',
                '--dark-surface': '#111111',
                '--dark-surface-light': '#222222',
                '--dark-surface-hover': '#333333',
                '--text-primary': '#ffffff',
                '--text-secondary': '#cccccc',
                '--text-tertiary': '#888888',
                '--border-color': '#ff00ff'
            },
            cyberpunk: {
                '--primary': '#00ffff',
                '--primary-dark': '#00cccc',
                '--primary-light': '#80ffff',
                '--secondary': '#ff00ff',
                '--secondary-light': '#ff80ff',
                '--accent-1': '#ffff00',
                '--accent-2': '#ff8000',
                '--accent-3': '#00ff00',
                '--accent-4': '#ff0000',
                '--dark-bg': '#0a0a1a',
                '--darker-bg': '#050510',
                '--dark-surface': '#151525',
                '--dark-surface-light': '#222235',
                '--dark-surface-hover': '#333345',
                '--text-primary': '#ffffff',
                '--text-secondary': '#ccccff',
                '--text-tertiary': '#8888aa',
                '--border-color': '#ff00ff'
            }
        };
        
        this.currentTheme = 'dark';
        this.init();
    }
    
    init() {
        // Load saved theme
        const savedTheme = localStorage.getItem('vibro-theme');
        if (savedTheme && this.themes[savedTheme]) {
            this.setTheme(savedTheme);
        }
        
        // Setup theme toggle
        document.getElementById('themeToggle')?.addEventListener('click', () => this.cycleTheme());
    }
    
    setTheme(themeName) {
        if (!this.themes[themeName]) return;
        
        this.currentTheme = themeName;
        const theme = this.themes[themeName];
        
        // Apply theme variables
        Object.keys(theme).forEach(variable => {
            document.documentElement.style.setProperty(variable, theme[variable]);
        });
        
        // Save to localStorage
        localStorage.setItem('vibro-theme', themeName);
        
        // Play transition animation
        this.playThemeTransition();
        
        // Show notification
        showNotification(`Theme changed to ${themeName}`, 'info');
    }
    
    cycleTheme() {
        const themes = Object.keys(this.themes);
        const currentIndex = themes.indexOf(this.currentTheme);
        const nextIndex = (currentIndex + 1) % themes.length;
        this.setTheme(themes[nextIndex]);
    }
    
    playThemeTransition() {
        // Create transition overlay
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.right = '0';
        overlay.style.bottom = '0';
        overlay.style.background = 'var(--primary)';
        overlay.style.zIndex = '99999';
        overlay.style.opacity = '0';
        overlay.style.pointerEvents = 'none';
        
        document.body.appendChild(overlay);
        
        // Animate overlay
        let opacity = 0;
        const fadeIn = setInterval(() => {
            opacity += 0.05;
            overlay.style.opacity = opacity;
            if (opacity >= 0.5) {
                clearInterval(fadeIn);
                setTimeout(() => {
                    const fadeOut = setInterval(() => {
                        opacity -= 0.05;
                        overlay.style.opacity = opacity;
                        if (opacity <= 0) {
                            clearInterval(fadeOut);
                            document.body.removeChild(overlay);
                        }
                    }, 16);
                }, 100);
            }
        }, 16);
    }
}

// =============== NOTIFICATION SYSTEM ===============
function showNotification(message, type = 'info', duration = 3000) {
    const notification = document.getElementById('notification');
    const iconMap = {
        success: 'check-circle',
        error: 'exclamation-circle',
        warning: 'exclamation-triangle',
        info: 'info-circle'
    };
    
    notification.innerHTML = `
        <i class="fas fa-${iconMap[type] || 'info-circle'}"></i>
        <span>${message}</span>
    `;
    
    notification.className = `notification show ${type}`;
    
    // Auto hide
    setTimeout(() => {
        notification.classList.remove('show');
    }, duration);
}

// =============== GLOBAL STATE ===============
let currentUser = null;
let currentVideo = null;
let videosCache = [];
let commentsCache = {};
let displayedVideos = 0;
let pollingInterval = null;
let lastUpdateCheck = Date.now();
let observer = null;
let isMobile = /iPhone|iPad|Android/i.test(navigator.userAgent);
let lastScrollTop = 0;
const VIDEOS_PER_PAGE = 12;
const COMMENTS_PER_PAGE = 20;
const POLLING_INTERVAL = 3000; // 3 seconds

// Initialize systems
let advancedCursor, soundEffects, animationController, themeManager;

// =============== INITIALIZATION ===============
document.addEventListener('DOMContentLoaded', async () => {
    // Initialize systems
    advancedCursor = new AdvancedCursor();
    soundEffects = new SoundEffects();
    animationController = new AnimationController();
    themeManager = new ThemeManager();
    
    // Enhanced logo click
    document.getElementById('logoBtn').addEventListener('click', (e) => {
        e.preventDefault();
        animationController.pulseElement(e.target);
        soundEffects.play('click');
        handleHomeClick();
    });
    
    // Enhanced search with animation
    document.getElementById('searchButton').addEventListener('click', () => {
        animationController.shakeElement(document.getElementById('searchBar'));
        soundEffects.play('click');
        handleSearch();
    });
    
    // Enhanced upload button
    document.getElementById('uploadBtn').addEventListener('click', () => {
        soundEffects.play('upload');
        document.getElementById('uploadSection').style.display = 'block';
        document.getElementById('videosSection').style.display = 'none';
        
        document.querySelectorAll('.sidebar-item').forEach(item => {
            item.classList.remove('active');
        });
    });
    
    // Mobile menu toggle
    document.getElementById('mobileMenuToggle').addEventListener('click', () => {
        document.getElementById('sidebar').classList.toggle('visible');
        soundEffects.play('click');
    });
    
    // Mobile search toggle
    document.getElementById('searchToggle').addEventListener('click', () => {
        document.getElementById('searchBar').classList.toggle('mobile-visible');
        soundEffects.play('click');
    });
    
    // Add parallax effect to background
    window.addEventListener('mousemove', (e) => {
        const x = (window.innerWidth - e.pageX * 2) / 100;
        const y = (window.innerHeight - e.pageY * 2) / 100;
        
        document.querySelector('.gradient-bg').style.transform = 
            `translate(${x}px, ${y}px) rotate(${x}deg)`;
    });
    
    // Add scroll effects
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const header = document.querySelector('.header');
        
        if (scrolled > 50) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
        
        // Parallax for floating elements
        document.querySelectorAll('.floating-element').forEach((el, i) => {
            const speed = 0.5 + (i * 0.1);
            el.style.transform = `translateY(${scrolled * speed}px)`;
        });
    });
    
    // Add keyboard shortcuts
    document.addEventListener('keydown', (e) => {
        // Space to play/pause video
        if (e.code === 'Space' && document.getElementById('videoModal').classList.contains('show')) {
            e.preventDefault();
            const video = document.getElementById('modalVideo');
            video.paused ? video.play() : video.pause();
            soundEffects.play('click');
        }
        
        // Escape to close modals
        if (e.code === 'Escape') {
            if (document.getElementById('videoModal').classList.contains('show')) {
                closeVideoModal();
                soundEffects.play('click');
            }
            if (document.getElementById('uploadSection').style.display !== 'none') {
                closeUploadModal();
                soundEffects.play('click');
            }
        }
        
        // / to focus search
        if (e.code === 'Slash' && !e.target.matches('input, textarea')) {
            e.preventDefault();
            document.getElementById('searchInput').focus();
            soundEffects.play('hover');
        }
        
        // Theme cycling with T
        if (e.code === 'KeyT' && e.ctrlKey) {
            e.preventDefault();
            themeManager.cycleTheme();
            soundEffects.play('notification');
        }
    });
    
    // Add continuous background animation
    setInterval(() => {
        // Random floating element pulse
        const elements = document.querySelectorAll('.floating-element');
        if (elements.length > 0) {
            const randomEl = elements[Math.floor(Math.random() * elements.length)];
            randomEl.style.animation = 'pulseEffect 2s ease-in-out';
            setTimeout(() => {
                randomEl.style.animation = '';
            }, 2000);
        }
    }, 3000);
    
    // Initialize your existing functionality
    setupEventListeners();
    setupUploadHandlers();
    setupTabHandlers();
    await loadCurrentUser();
    await loadVideos(true);
});

// =============== ORIGINAL FUNCTIONALITY (UPDATED) ===============

// Setup event listeners from original code
function setupEventListeners() {
    document.getElementById('userAvatar').addEventListener('click', () => {
        document.getElementById('userDropdown').classList.toggle('show');
    });
    
    // Cancel upload
    document.getElementById('cancelUploadBtn').addEventListener('click', () => {
        closeUploadModal();
    });
    
    // Close modal
    document.getElementById('closeModalBtn').addEventListener('click', closeVideoModal);
    
    // Like button
    document.getElementById('likeBtn').addEventListener('click', toggleLike);
    
    // Share button
    document.getElementById('shareBtn').addEventListener('click', shareVideo);
    
    // Comment submit
    document.getElementById('commentSubmitBtn').addEventListener('click', postComment);
    
    // Enter key in comment input
    document.getElementById('commentInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            postComment();
        }
    });
    
    // Load more videos
    document.getElementById('loadMoreBtn').addEventListener('click', () => loadVideos(false));
    
    // Load more comments
    document.getElementById('loadMoreCommentsBtn').addEventListener('click', () => loadComments(false));
    
    // Logout
    document.getElementById('logoutBtn').addEventListener('click', logout);
    
    // Login
    document.getElementById('loginBtn').addEventListener('click', () => window.location.href = '/login');
    
    // Settings
    document.getElementById('settingsBtn').addEventListener('click', openSettings);
    
    // Search input enter key
    document.getElementById('searchInput').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            e.preventDefault();
            handleSearch();
        }
    });
    
    // Sort changes
    document.getElementById('sortVideos').addEventListener('change', async () => {
        const activeTab = document.querySelector('.sidebar-item.active');
        let viewType = 'home';
        
        if (activeTab) {
            const tabMap = {
                'homeBtn': 'home',
                'trendingBtn': 'trending',
                'historyBtn': 'history',
                'likedBtn': 'liked',
                'yourVideosBtn': 'your-videos',
                'watchLaterBtn': 'watch-later'
            };
            
            viewType = tabMap[activeTab.id] || 'home';
        }
        
        await loadVideosForView(viewType, true);
    });
    
    document.getElementById('commentsSort').addEventListener('change', () => loadComments(true));
    
    // Close modals on outside click
    document.addEventListener('click', (e) => {
        if (!e.target.closest('.user-menu') && document.getElementById('userDropdown').classList.contains('show')) {
            document.getElementById('userDropdown').classList.remove('show');
        }
        
        if (e.target.classList.contains('video-modal')) {
            closeVideoModal();
        }
    });
}

// =============== HEADER SCROLL EFFECT ===============
function initHeaderScroll() {
    let lastScroll = 0;
    const header = document.querySelector('.header');
    
    window.addEventListener('scroll', () => {
        const currentScroll = window.pageYOffset;
        
        if (currentScroll <= 0) {
            header.classList.remove('hidden');
            return;
        }
        
        if (currentScroll > lastScroll && !header.classList.contains('hidden')) {
            // Scrolling down
            header.classList.add('hidden');
        } else if (currentScroll < lastScroll && header.classList.contains('hidden')) {
            // Scrolling up
            header.classList.remove('hidden');
        }
        
        lastScroll = currentScroll;
    });
}

// =============== FIXED SEARCH FUNCTION ===============
async function handleSearch() {
    const query = document.getElementById('searchInput').value.trim();
    
    if (query) {
        showNotification(`Searching for: ${query}`, 'info');
        soundEffects.play('notification');
        // Clear current videos and load search results
        await loadVideos(true, query);
    } else {
        showNotification('Please enter a search term', 'info');
        animationController.shakeElement(document.getElementById('searchInput'));
    }
}

// =============== FIXED HOME BUTTON ===============
function handleHomeClick() {
    soundEffects.play('click');
    animationController.pulseElement(document.getElementById('homeBtn'));
    
    // Hide upload section, show videos
    document.getElementById('uploadSection').style.display = 'none';
    document.getElementById('videosSection').style.display = 'block';
    
    // Clear search input
    document.getElementById('searchInput').value = '';
    
    // Reset sort to default
    document.getElementById('sortVideos').value = 'newest';
    
    // Reload videos
    loadVideos(true);
    
    // Update active state
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.classList.remove('active');
    });
    document.getElementById('homeBtn').classList.add('active');
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// =============== USER MANAGEMENT ===============
async function loadCurrentUser() {
    try {
        const res = await fetch('/api/me', { credentials: 'include' });
        if (res.ok) {
            const data = await res.json();
            if (data.authenticated) {
                currentUser = data.user;
                updateUserUI();
            }
        }
    } catch (err) {
        console.error('Failed to load user:', err);
    }
}

function updateUserUI() {
    if (currentUser) {
        const avatarUrl = currentUser.avatar_url || currentUser.profile_picture || 
            `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.username || currentUser.email)}&background=random`;
        
        document.getElementById('userAvatar').src = avatarUrl;
        document.getElementById('commentAvatar').src = avatarUrl;
        
        document.getElementById('dropdownHeader').innerHTML = `
            <h3>${currentUser.username || currentUser.email}</h3>
            <p>${currentUser.email}</p>
        `;
        
        document.getElementById('logoutBtn').style.display = 'block';
        document.getElementById('loginBtn').style.display = 'none';
        
        // Enable comment form
        document.getElementById('commentInput').placeholder = "Add a comment...";
        document.getElementById('commentSubmitBtn').disabled = false;
    } else {
        document.getElementById('logoutBtn').style.display = 'none';
        document.getElementById('loginBtn').style.display = 'block';
        
        // Disable comment form
        document.getElementById('commentInput').placeholder = "Sign in to comment";
        document.getElementById('commentSubmitBtn').disabled = true;
    }
}

async function logout() {
    try {
        const res = await fetch('/api/logout', {
            method: 'POST',
            credentials: 'include'
        });
        
        if (res.ok) {
            currentUser = null;
            document.getElementById('userDropdown').classList.remove('show');
            updateUserUI();
            showNotification('Logged out successfully', 'success');
            soundEffects.play('success');
            loadVideos(true);
        }
    } catch (err) {
        showNotification('Logout failed', 'error');
        soundEffects.play('error');
    }
}

// =============== VIDEO UPLOAD ===============
function setupUploadHandlers() {
    const uploadArea = document.getElementById('uploadArea');
    const videoFileInput = document.getElementById('videoFile');
    const selectFileBtn = document.getElementById('selectFileBtn');
    const clearFileBtn = document.getElementById('clearFileBtn');
    const uploadForm = document.getElementById('uploadForm');
    
    // Drag and drop
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('dragover');
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            handleVideoSelect(files[0]);
        }
    });
    
    // File selection
    selectFileBtn.addEventListener('click', () => {
        videoFileInput.click();
    });
    
    videoFileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            handleVideoSelect(e.target.files[0]);
        }
    });
    
    // Clear file
    clearFileBtn.addEventListener('click', () => {
        videoFileInput.value = '';
        document.getElementById('fileInfo').style.display = 'none';
        showNotification('File cleared', 'info');
        soundEffects.play('click');
    });
    
    // Form submission
    uploadForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        await handleUpload();
    });
}

function handleVideoSelect(file) {
    if (!file.type.startsWith('video/')) {
        showNotification('Please select a video file', 'error');
        soundEffects.play('error');
        return;
    }
    
    if (file.size > 500 * 1024 * 1024) {
        showNotification('File size must be less than 500MB', 'error');
        soundEffects.play('error');
        return;
    }
    
    const fileInfo = document.getElementById('fileInfo');
    document.getElementById('fileName').textContent = file.name;
    document.getElementById('fileSize').textContent = formatFileSize(file.size);
    fileInfo.style.display = 'block';
    showNotification('Video file selected', 'success');
    soundEffects.play('success');
}

async function handleUpload() {
    if (!currentUser) {
        showNotification('Please sign in to upload videos', 'error');
        soundEffects.play('error');
        return;
    }
    
    const videoFile = document.getElementById('videoFile').files[0];
    const title = document.getElementById('videoTitle').value.trim();
    
    if (!videoFile) {
        showNotification('Please select a video file', 'error');
        soundEffects.play('error');
        return;
    }
    
    if (!title) {
        showNotification('Please enter a video title', 'error');
        soundEffects.play('error');
        return;
    }
    
    const formData = new FormData();
    formData.append('video', videoFile);
    formData.append('title', title);
    formData.append('description', document.getElementById('videoDescription').value.trim());
    formData.append('category', document.getElementById('videoCategory').value);
    formData.append('privacy', document.getElementById('videoPrivacy').value);
    formData.append('tags', document.getElementById('videoTags').value);
    formData.append('settings', JSON.stringify({
        allowComments: document.getElementById('allowComments').checked,
        allowRatings: document.getElementById('allowRatings').checked,
        showViewCount: document.getElementById('showViewCount').checked,
        aiGenerated: document.getElementById('aiGenerated').checked
    }));
    
    try {
        showNotification('Uploading video...', 'info');
        soundEffects.play('upload');
        
        const response = await fetch('/api/upload-video', {
            method: 'POST',
            body: formData,
            credentials: 'include'
        });
        
        if (response.ok) {
            const result = await response.json();
            showNotification('Video uploaded successfully!', 'success');
            soundEffects.play('success');
            closeUploadModal();
            document.getElementById('fileInfo').style.display = 'none';
            document.getElementById('uploadForm').reset();
            loadVideos(true);
        } else {
            const error = await response.text();
            showNotification(`Upload failed: ${error}`, 'error');
            soundEffects.play('error');
        }
    } catch (error) {
        showNotification(`Upload error: ${error.message}`, 'error');
        soundEffects.play('error');
    }
}

function closeUploadModal() {
    document.getElementById('uploadSection').style.display = 'none';
    document.getElementById('videosSection').style.display = 'block';
    handleHomeClick();
}

// =============== UTILITY FUNCTIONS ===============
function formatNumber(num) {
    if (num >= 1000000) {
        return (num / 1000000).toFixed(1) + 'M';
    } else if (num >= 1000) {
        return (num / 1000).toFixed(1) + 'K';
    }
    return num.toString();
}

function formatDuration(seconds) {
    if (!seconds) return '--:--';
    const hrs = Math.floor(seconds / 3600);
    const mins = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    
    if (hrs > 0) {
        return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
    return `${mins}:${secs.toString().padStart(2, '0')}`;
}

function formatRelativeTime(dateString) {
    const date = new Date(dateString);
    const now = new Date();
    const diffMs = now - date;
    const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
    
    if (diffDays === 0) return 'Today';
    if (diffDays === 1) return 'Yesterday';
    if (diffDays < 7) return `${diffDays} days ago`;
    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;
    return date.toLocaleDateString();
}

function formatFileSize(bytes) {
    if (bytes >= 1000000000) {
        return (bytes / 1000000000).toFixed(1) + ' GB';
    } else if (bytes >= 1000000) {
        return (bytes / 1000000000).toFixed(1) + ' MB';
    } else if (bytes >= 1000) {
        return (bytes / 1000).toFixed(1) + ' KB';
    }
    return bytes + ' B';
}

// =============== VIDEO LOADING & DISPLAY ===============
async function loadVideos(reset = false, searchQuery = '') {
    const activeTab = document.querySelector('.sidebar-item.active');
    let viewType = 'home';
    
    if (activeTab) {
        const tabMap = {
            'homeBtn': 'home',
            'trendingBtn': 'trending',
            'historyBtn': 'history',
            'likedBtn': 'liked',
            'yourVideosBtn': 'your-videos',
            'watchLaterBtn': 'watch-later'
        };
        
        viewType = tabMap[activeTab.id] || 'home';
    }
    
    await loadVideosForView(viewType, reset, searchQuery);
}

async function loadVideosForView(viewType, reset = true, searchQuery = '') {
    const videosList = document.getElementById('videosList');
    
    if (reset) {
        displayedVideos = 0;
        videosList.innerHTML = `
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading ${viewType} videos...</p>
            </div>
        `;
    }
    
    try {
        const sortBy = document.getElementById('sortVideos').value;
        let url = `/api/view-videos?view=${viewType}&sort=${sortBy}&limit=${VIDEOS_PER_PAGE}&offset=${displayedVideos}`;
        
        if (searchQuery) {
            // FIXED: Properly encode search query for PostgREST
            const encodedQuery = encodeURIComponent(`%${searchQuery}%`);
            url = `/api/view-videos?or=(title.ilike.${encodedQuery},description.ilike.${encodedQuery},users.username.ilike.${encodedQuery})&limit=${VIDEOS_PER_PAGE}&offset=${displayedVideos}`;
        }
        
        
        const response = await fetch(url, { credentials: 'include' });
        
        if (!response.ok) {
            if (response.status === 401) {
                const errorData = await response.json();
                videosList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-lock"></i>
                        <h3>Authentication Required</h3>
                        <p>${errorData.error || 'Please sign in to view this content'}</p>
                        <button class="btn-primary" onclick="window.location.href='/login'" style="margin-top: 16px;">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                    </div>
                `;
                return;
            }
            
            throw new Error(`Failed to load videos: ${response.status}`);
        }
        
        const videos = await response.json();
        
        if (reset) {
            videosCache = videos;
            videosList.innerHTML = '';
        } else {
            videosCache = [...videosCache, ...videos];
        }
        
        if (videos.length === 0) {
            if (reset) {
                const emptyMessages = {
                    'home': 'No videos found. Be the first to upload!',
                    'trending': 'No trending videos yet',
                    'history': 'No watch history found',
                    'liked': 'No liked videos yet',
                    'your-videos': 'You haven\'t uploaded any videos yet',
                    'watch-later': 'No videos in watch later'
                };
                
                videosList.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-video-slash"></i>
                        <h3>No videos found</h3>
                        <p>${emptyMessages[viewType] || 'Try a different view or upload a video'}</p>
                        ${viewType === 'your-videos' ? `
                            <button class="btn-primary" id="uploadFromEmptyBtn" style="margin-top: 16px;">
                                <i class="fas fa-upload"></i>
                                Upload Your First Video
                            </button>
                        ` : ''}
                    </div>
                `;
                
                if (viewType === 'your-videos') {
                    document.getElementById('uploadFromEmptyBtn').addEventListener('click', () => {
                        document.getElementById('uploadBtn').click();
                    });
                }
            }
            document.getElementById('loadMoreContainer').style.display = 'none';
            return;
        }
        
        renderVideos(videos, reset);
        displayedVideos += videos.length;
        
        document.getElementById('loadMoreContainer').style.display = 
            videos.length === VIDEOS_PER_PAGE ? 'block' : 'none';
        
        if (!pollingInterval) {
            startRealTimePolling();
        }
        
    } catch (error) {
        console.error(`Load ${viewType} videos error:`, error);
        showNotification(`Failed to load ${viewType} videos: ${error.message}`, 'error');
        soundEffects.play('error');
        videosList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Failed to load videos</h3>
                <p>Please try again later</p>
            </div>
        `;
    }
}

function renderVideos(videos, reset = false) {
    const videosList = document.getElementById('videosList');
    
    if (reset) videosList.innerHTML = '';
    
    videos.forEach(video => {
        const videoCard = document.createElement('div');
        videoCard.className = 'video-card parallax-card';
        videoCard.setAttribute('data-video-id', video.id);
        
        const thumbnail = video.cover_url || 'https://images.unsplash.com/photo-1611605698335-8b1569810435?w=800&h=450&fit=crop';
        const duration = video.duration ? formatDuration(video.duration) : '--:--';
        const views = video.views ? formatNumber(video.views) : '0';
        const uploadTime = video.uploaded_at ? formatRelativeTime(video.uploaded_at) : 
                          (video.created_at ? formatRelativeTime(video.created_at) : 'Recently');
        
        const userAvatar = video.user?.avatar_url || video.user?.profile_picture || 
            `https://ui-avatars.com/api/?name=${encodeURIComponent(video.user?.username || video.user?.email || 'User')}&background=random`;
        
        // Add AI badge if applicable
        const aiBadge = video.ai_generated ? '<span class="ai-badge"><i class="fas fa-robot"></i> AI</span>' : '';
        
        videoCard.innerHTML = `
            <div class="video-thumbnail">
                <img src="${thumbnail}" alt="${video.title || 'Video'}" 
                     onerror="this.src='https://images.unsplash.com/photo-1611605698335-8b1569810435?w=800&h=450&fit=crop'">
                <span class="video-duration">${duration}</span>
            </div>
            <div class="video-info">
                <img src="${userAvatar}" 
                     alt="${video.user?.username || 'User'}" 
                     class="channel-avatar"
                     onerror="this.src='https://ui-avatars.com/api/?name=User&background=random'">
                <div class="video-content">
                    <h3 class="video-title">${video.title || 'Untitled Video'}</h3>
                    <p class="channel-name">${video.user?.username || video.user?.email?.split('@')[0] || 'User'}</p>
                    <div class="video-stats">
                        <span>${views} views</span>
                        
                        <span>${uploadTime}</span>
                        ${aiBadge}
                    </div>
                </div>
            </div>
        `;
        
        videoCard.addEventListener('click', () => openVideoModal(video));
        
        // Add animation delay for staggered appearance
        videoCard.style.animationDelay = `${Math.random() * 0.3}s`;
        
        videosList.appendChild(videoCard);
    });
}

// =============== VIDEO MODAL ===============
async function openVideoModal(video) {
    currentVideo = video;
    const modal = document.getElementById('videoModal');
    const player = document.getElementById('modalVideo');
    
    // Set video player
    if (video.video_url) {
        player.src = video.video_url;
    }
    
    // Set poster
    if (video.cover_url) {
        player.poster = video.cover_url;
    }
    
    // Set video info
    document.getElementById('modalVideoTitle').textContent = video.title || 'Untitled Video';
    
    const uploadTime = video.uploaded_at || video.created_at;
    const aiBadge = video.ai_generated ? ' <span class="ai-badge"><i class="fas fa-robot"></i> AI Generated</span>' : '';
    document.getElementById('modalVideoMeta').innerHTML = `
        <span>${formatNumber(video.views || 0)} views</span>
        
        <span>${uploadTime ? formatRelativeTime(uploadTime) : 'Recently'}</span>
        ${aiBadge}
    `;
    
    // Set description
    const descShort = document.getElementById('videoDescriptionShort');
    const descFull = document.getElementById('videoDescriptionFull');
    const toggleBtn = document.getElementById('descriptionToggleBtn');
    
    if (video.description) {
        const shortText = video.description.substring(0, 200);
        descShort.textContent = shortText;
        descFull.textContent = video.description;
        
        if (video.description.length > 200) {
            toggleBtn.style.display = 'inline-block';
            toggleBtn.textContent = 'Show more';
            toggleBtn.onclick = toggleDescription;
        } else {
            toggleBtn.style.display = 'none';
        }
    } else {
        descShort.textContent = 'No description provided';
        descFull.textContent = '';
        toggleBtn.style.display = 'none';
    }
    
    // Load likes
    if (currentUser) {
        updateLikeButton({
            likes: video.likes || 0,
            liked: video.hasLiked || false
        });
    } else {
        updateLikeButton({
            likes: video.likes || 0,
            liked: false
        });
    }
    
    // Load comments from video data
    await loadComments(true, video.comments || []);
    
    // Load recommended videos
    await loadRecommendedVideos();
    
    // Show modal
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
    
    // Play video
    player.play().catch((error) => {
        console.log('Video play failed:', error.message);
        showNotification('Click play to start video', 'info');
        soundEffects.play('notification');
    });
    
    // Track view
    await trackView(video.id);
}

function closeVideoModal() {
    const modal = document.getElementById('videoModal');
    const player = document.getElementById('modalVideo');
    
    player.pause();
    player.src = '';
    player.poster = '';
    modal.classList.remove('show');
    document.body.style.overflow = '';
    currentVideo = null;
}

function toggleDescription() {
    const short = document.getElementById('videoDescriptionShort');
    const full = document.getElementById('videoDescriptionFull');
    const toggleBtn = document.getElementById('descriptionToggleBtn');
    
    if (full.style.display === 'none') {
        short.style.display = 'none';
        full.style.display = 'block';
        toggleBtn.textContent = 'Show less';
    } else {
        short.style.display = 'block';
        full.style.display = 'none';
        toggleBtn.textContent = 'Show more';
    }
}

// =============== COMMENTS LOADING ===============
async function loadComments(reset = false, videoComments = null) {
    if (!currentVideo && !videoComments) return;
    
    const commentsList = document.getElementById('commentsList');
    
    if (reset) {
        commentsCache[currentVideo.id] = { comments: [], page: 0, total: 0 };
        commentsList.innerHTML = `
            <div class="loading">
                <div class="loading-spinner"></div>
                <p>Loading comments...</p>
            </div>
        `;
    }
    
    try {
        const comments = videoComments || currentVideo.comments || [];
        
        document.getElementById('commentsCount').textContent = `${formatNumber(comments.length)} Comments`;
        
        if (comments.length === 0 && reset) {
            commentsList.innerHTML = `
                <div style="text-align: center; padding: 48px; color: var(--text-tertiary);">
                    <i class="fas fa-comment-slash" style="font-size: 24px; margin-bottom: 16px;"></i>
                    <h3>No comments yet</h3>
                    <p>Be the first to comment!</p>
                </div>
            `;
            document.getElementById('loadMoreComments').style.display = 'none';
            return;
        }
        
        renderComments(comments, reset);
        document.getElementById('loadMoreComments').style.display = 'none';
        
    } catch (error) {
        console.error('Load comments error:', error);
        showNotification(`Failed to load comments: ${error.message}`, 'error');
        soundEffects.play('error');
        commentsList.innerHTML = `
            <div style="text-align: center; padding: 48px; color: var(--text-tertiary);">
                <i class="fas fa-exclamation-triangle" style="font-size: 24px; margin-bottom: 16px;"></i>
                <h3>Failed to load comments</h3>
            </div>
        `;
    }
}

function renderComments(comments, reset = false) {
    const commentsList = document.getElementById('commentsList');
    
    if (reset) commentsList.innerHTML = '';
    
    comments.forEach((comment, index) => {
        const commentDiv = document.createElement('div');
        commentDiv.className = 'comment-item';
        commentDiv.setAttribute('data-comment-id', comment.id);
        
        const userAvatar = comment.user?.avatar_url || comment.user?.profile_picture || 
            `https://ui-avatars.com/api/?name=${encodeURIComponent(comment.user?.username || comment.user?.email || 'User')}&background=random`;
        
        commentDiv.innerHTML = `
            <img src="${userAvatar}" alt="${comment.user?.username || 'User'}" 
                 class="comment-avatar"
                 onerror="this.src='https://ui-avatars.com/api/?name=User&background=random'">
            <div class="comment-content">
                <div class="comment-header">
                    <span class="comment-author">${comment.user?.username || 'User'}</span>
                    <span class="comment-time">${formatRelativeTime(comment.created_at)}</span>
                </div>
                <div class="comment-text">${comment.text || ''}</div>
                <div class="comment-actions">
                    <button class="comment-like" onclick="likeComment('${comment.id}', ${comment.hasLiked || false})">
                        <i class="${comment.hasLiked ? 'fas' : 'far'} fa-thumbs-up"></i>
                        <span>${formatNumber(comment.likes || 0)}</span>
                    </button>
                    <button class="comment-reply">
                        Reply
                    </button>
                </div>
            </div>
        `;
        
        // Stagger animation
        commentDiv.style.animationDelay = `${index * 0.1}s`;
        
        commentsList.appendChild(commentDiv);
    });
}

// =============== LIKES ===============
async function toggleLike() {
    if (!currentVideo || !currentUser) {
        showNotification('Please sign in to like videos', 'error');
        soundEffects.play('error');
        return;
    }
    
    soundEffects.play('click');
    animationController.pulseElement(document.getElementById('likeBtn'));
    
    try {
        const response = await fetch('/api/like-video', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            credentials: 'include',
            body: JSON.stringify({
                videoId: currentVideo.id,
                action: currentVideo.hasLiked ? 'unlike' : 'like'
            })
        });
        
        if (response.ok) {
            const data = await response.json();
            currentVideo.hasLiked = data.liked;
            currentVideo.likes = data.likes;
            updateLikeButton(data);
            showNotification(data.liked ? 'Video liked!' : 'Video unliked', 'success');
            soundEffects.play(data.liked ? 'success' : 'click');
        }
    } catch (error) {
        showNotification('Failed to update like', 'error');
        soundEffects.play('error');
    }
}

function updateLikeButton(data) {
    const likeBtn = document.getElementById('likeBtn');
    const likeCount = document.getElementById('likeCount');
    
    likeCount.textContent = formatNumber(data.likes || 0);
    
    if (data.liked) {
        likeBtn.innerHTML = `<i class="fas fa-thumbs-up"></i> <span id="likeCount">${likeCount.textContent}</span>`;
        likeBtn.classList.add('liked');
    } else {
        likeBtn.innerHTML = `<i class="far fa-thumbs-up"></i> <span id="likeCount">${likeCount.textContent}</span>`;
        likeBtn.classList.remove('liked');
    }
}

// =============== POST COMMENT ===============
async function postComment() {
    if (!currentVideo || !currentUser) {
        showNotification('Please sign in to comment', 'error');
        soundEffects.play('error');
        return;
    }
    
    const commentInput = document.getElementById('commentInput');
    const text = commentInput.value.trim();
    
    if (!text) {
        showNotification('Comment cannot be empty', 'error');
        soundEffects.play('error');
        return;
    }
    
    soundEffects.play('click');
    
    try {
        const response = await fetch(`/api/view-videos?videoId=${currentVideo.id}`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            credentials: 'include',
            body: JSON.stringify({ text })
        });
        
        if (response.ok) {
            const comment = await response.json();
            commentInput.value = '';
            
            // Add comment to UI
            const commentsList = document.getElementById('commentsList');
            const commentDiv = document.createElement('div');
            commentDiv.className = 'comment-item';
            commentDiv.setAttribute('data-comment-id', comment.id);
            
            const userAvatar = currentUser.avatar_url || currentUser.profile_picture || 
                `https://ui-avatars.com/api/?name=${encodeURIComponent(currentUser.username || currentUser.email)}&background=random`;
            
            commentDiv.innerHTML = `
                <img src="${userAvatar}" alt="${currentUser.username || 'User'}" class="comment-avatar">
                <div class="comment-content">
                    <div class="comment-header">
                        <span class="comment-author">${currentUser.username || 'User'}</span>
                        <span class="comment-time">Just now</span>
                    </div>
                    <div class="comment-text">${text}</div>
                    <div class="comment-actions">
                        <button class="comment-like">
                            <i class="far fa-thumbs-up"></i>
                            <span>0</span>
                        </button>
                        <button class="comment-reply">
                            Reply
                        </button>
                    </div>
                </div>
            `;
            
            commentsList.insertBefore(commentDiv, commentsList.firstChild);
            
            // Update comment count
            const commentsCount = document.getElementById('commentsCount');
            const currentCount = parseInt(commentsCount.textContent) || 0;
            commentsCount.textContent = `${formatNumber(currentCount + 1)} Comments`;
            
            showNotification('Comment posted!', 'success');
            soundEffects.play('success');
        }
    } catch (error) {
        showNotification('Failed to post comment', 'error');
        soundEffects.play('error');
    }
}

// =============== LIKE COMMENT ===============
async function likeComment(commentId, isLiked) {
    if (!currentUser) {
        showNotification('Please sign in to like comments', 'error');
        soundEffects.play('error');
        return;
    }
    
    soundEffects.play('click');
    
    try {
        const response = await fetch(`/api/like-video`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            credentials: 'include',
            body: JSON.stringify({
                commentId: commentId,
                action: isLiked ? 'unlike' : 'like'
            })
        });
        
        if (response.ok) {
            const data = await response.json();
            const commentDiv = document.querySelector(`.comment-item[data-comment-id="${commentId}"]`);
            if (commentDiv) {
                const likeBtn = commentDiv.querySelector('.comment-like');
                const likeCount = commentDiv.querySelector('.comment-like span');
                
                if (likeBtn && likeCount) {
                    likeBtn.classList.toggle('liked', data.liked);
                    likeBtn.innerHTML = `<i class="${data.liked ? 'fas' : 'far'} fa-thumbs-up"></i> <span>${formatNumber(data.likes)}</span>`;
                    animationController.pulseElement(likeBtn);
                }
            }
        }
    } catch (error) {
        showNotification('Failed to like comment', 'error');
        soundEffects.play('error');
    }
}

// =============== OTHER FUNCTIONS ===============
async function loadRecommendedVideos() {
    const recommendedVideos = document.getElementById('recommendedVideos');
    recommendedVideos.innerHTML = `
        <div style="text-align: center; padding: 20px; color: var(--text-tertiary);">
            <p>Recommended videos will appear here</p>
        </div>
    `;
}

async function trackView(videoId) {
    try {
        await fetch(`/api/view-videos?videoId=${videoId}&incrementViews=true`, {
            method: 'GET',
            credentials: 'include'
        });
    } catch (error) {
        console.error('Failed to track view:', error);
    }
}

function openSettings() {
    showNotification('Settings feature coming soon!', 'info');
    soundEffects.play('notification');
}

function shareVideo() {
    if (navigator.share) {
        navigator.share({
            title: currentVideo.title || 'Check out this video',
            text: 'Watch this video on Vibro.x',
            url: window.location.href
        });
    } else {
        navigator.clipboard.writeText(window.location.href).then(() => {
            showNotification('Link copied to clipboard!', 'success');
            soundEffects.play('success');
        }).catch(() => {
            showNotification('Failed to copy link', 'error');
            soundEffects.play('error');
        });
    }
}

// =============== TAB HANDLERS ===============
function setupTabHandlers() {
    // Home tab
    document.getElementById('homeBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('homeBtn', 'home');
    });
    
    // Trending tab
    document.getElementById('trendingBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('trendingBtn', 'trending');
    });
    
    // History tab
    document.getElementById('historyBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('historyBtn', 'history');
    });
    
    // Liked videos tab
    document.getElementById('likedBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('likedBtn', 'liked');
    });
    
    // Your videos tab
    document.getElementById('yourVideosBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('yourVideosBtn', 'your-videos');
    });
    
    // Watch later tab
    document.getElementById('watchLaterBtn').addEventListener('click', (e) => {
        e.preventDefault();
        handleTabClick('watchLaterBtn', 'watch-later');
    });
}

async function handleTabClick(tabId, viewType) {
    soundEffects.play('click');
    animationController.pulseElement(document.getElementById(tabId));
    
    // Update active state
    document.querySelectorAll('.sidebar-item').forEach(item => {
        item.classList.remove('active');
    });
    document.getElementById(tabId).classList.add('active');
    
    // Hide upload section if visible
    document.getElementById('uploadSection').style.display = 'none';
    document.getElementById('videosSection').style.display = 'block';
    
    // Clear search input
    document.getElementById('searchInput').value = '';
    
    // Update page title
    const pageTitles = {
        'home': 'Recommended Videos',
        'trending': 'Trending Videos',
        'history': 'Watch History',
        'liked': 'Liked Videos',
        'your-videos': 'Your Videos',
        'watch-later': 'Watch Later'
    };
    
    document.querySelector('#videosSection h2').textContent = pageTitles[viewType] || 'Videos';
    
    // Load videos for this view
    await loadVideosForView(viewType);
}

// =============== REAL-TIME POLLING ===============
function startRealTimePolling() {
    if (pollingInterval) clearInterval(pollingInterval);
    
    pollingInterval = setInterval(async () => {
        if (!videosCache || videosCache.length === 0) return;
        
        try {
            const videoIds = videosCache.map(v => v.id).join(',');
            const response = await fetch(
                `/api/view-videos?statsOnly=true&ids=${videoIds}&since=${lastUpdateCheck}`,
                { credentials: 'include' }
            );
            
            if (response.ok) {
                const updates = await response.json();
                if (updates && updates.length > 0) {
                    updates.forEach(update => {
                        updateVideoStatsInUI(update);
                    });
                }
                lastUpdateCheck = Date.now();
            }
        } catch (err) {
            console.error('Polling error:', err);
        }
    }, POLLING_INTERVAL);
}

function updateVideoStatsInUI(stats) {
    const videoElement = document.querySelector(`.video-card[data-video-id="${stats.id}"]`);
    if (!videoElement) return;
    
    // Update views
    const viewsElement = videoElement.querySelector('.video-stats span:first-child');
    if (viewsElement && stats.views !== undefined) {
        viewsElement.textContent = `${formatNumber(stats.views)} views`;
    }
}

// Clean up on page unload
window.addEventListener('beforeunload', () => {
    if (pollingInterval) {
        clearInterval(pollingInterval);
    }
    if (observer) {
        observer.disconnect();
    }
});
</script>
</body>
</html>
